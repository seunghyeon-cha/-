(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4665],{579:function(e,t,r){Promise.resolve().then(r.bind(r,4995))},4995:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var s=r(7437),a=r(2265),n=r(9376),o=r(7648),i=r(9501),l=r(3590),c=r(7119),d=r(4565),u=r(4804),m=r(1492),h=r(6898),x=r(9375),p=r(7802);let g=c.Ry({email:c.Z_().email("올바른 이메일 형식이 아닙니다"),password:c.Z_().min(8,"비밀번호는 8자 이상이어야 합니다"),rememberMe:c.O7().optional()});function f(){var e,t;let r=(0,n.useRouter)(),{setAuth:c}=(0,x.t)(),[f,b]=(0,a.useState)(!1),[y,v]=(0,a.useState)(null),{register:j,handleSubmit:w,formState:{errors:N}}=(0,i.cI)({resolver:(0,l.F)(g)}),k=async e=>{try{b(!0),v(null);let t=await (0,h.x4)({email:e.email,password:e.password});c(t.user,t.accessToken,t.refreshToken),p.A.success("로그인되었습니다"),r.push("/")}catch(e){var t,s;v((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"로그인에 실패했습니다. 다시 시도해주세요.")}finally{b(!1)}};return(0,s.jsxs)(m.Z,{padding:"lg",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-primary-500 rounded-full flex items-center justify-center text-white text-xl font-bold mx-auto mb-4",children:"예"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-primary-700 mb-2",children:"예림투어에 로그인"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"국내 여행의 모든 것"})]}),y&&(0,s.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-error rounded-lg text-sm text-error",children:y}),(0,s.jsxs)("form",{onSubmit:w(k),className:"space-y-5",children:[(0,s.jsx)(u.Z,{label:"이메일",type:"email",placeholder:"user@yerimtour.com",fullWidth:!0,error:null===(e=N.email)||void 0===e?void 0:e.message,...j("email")}),(0,s.jsx)(u.Z,{label:"비밀번호",type:"password",placeholder:"8자 이상",fullWidth:!0,error:null===(t=N.password)||void 0===t?void 0:t.message,...j("password")}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"rememberMe",className:"w-[18px] h-[18px] border border-gray-300 rounded text-primary-500 focus:ring-primary-500",...j("rememberMe")}),(0,s.jsx)("label",{htmlFor:"rememberMe",className:"ml-2 text-sm text-gray-700",children:"로그인 상태 유지"})]}),(0,s.jsx)(d.Z,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,isLoading:f,children:"로그인"})]}),(0,s.jsxs)("div",{className:"flex items-center my-8",children:[(0,s.jsx)("div",{className:"flex-1 border-t border-gray-300"}),(0,s.jsx)("span",{className:"px-4 text-sm text-gray-500",children:"또는"}),(0,s.jsx)("div",{className:"flex-1 border-t border-gray-300"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(d.Z,{type:"button",fullWidth:!0,className:"bg-[#FEE500] text-black hover:bg-[#FDD800] h-11",onClick:()=>p.A.info("카카오 로그인은 준비 중입니다"),children:(0,s.jsx)("span",{className:"font-semibold",children:"카카오로 계속하기"})}),(0,s.jsx)(d.Z,{type:"button",fullWidth:!0,className:"bg-[#03C75A] text-white hover:bg-[#02B350] h-11",onClick:()=>p.A.info("네이버 로그인은 준비 중입니다"),children:(0,s.jsx)("span",{className:"font-semibold",children:"네이버로 계속하기"})}),(0,s.jsx)(d.Z,{type:"button",variant:"outline",fullWidth:!0,className:"border-gray-300 text-gray-700 h-11",onClick:()=>p.A.info("구글 로그인은 준비 중입니다"),children:(0,s.jsx)("span",{className:"font-semibold",children:"구글로 계속하기"})})]}),(0,s.jsxs)("div",{className:"mt-8 text-center text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"아직 계정이 없으신가요? "}),(0,s.jsx)(o.default,{href:"/signup",className:"text-primary-600 font-bold hover:text-primary-700",children:"회원가입"})]})]})}},4565:function(e,t,r){"use strict";var s=r(7437),a=r(1994);t.Z=e=>{let{variant:t="primary",size:r="md",isLoading:n=!1,fullWidth:o=!1,className:i,disabled:l,children:c,...d}=e;return(0,s.jsx)("button",{className:(0,a.W)("inline-flex items-center justify-center font-semibold rounded-lg transition-all duration-200 disabled:cursor-not-allowed disabled:opacity-60",{primary:"bg-primary-500 text-white hover:bg-primary-600 active:bg-primary-700 disabled:bg-gray-400",secondary:"bg-gray-100 text-gray-700 hover:bg-gray-200 active:bg-gray-300 disabled:bg-gray-100",outline:"bg-transparent text-primary-500 border border-primary-500 hover:bg-primary-50 active:bg-primary-100 disabled:border-gray-300 disabled:text-gray-400",ghost:"bg-transparent text-gray-500 hover:bg-gray-100 active:bg-gray-200 disabled:bg-transparent disabled:text-gray-400"}[t],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-base",lg:"h-12 px-6 text-base"}[r],o?"w-full":"",n&&"cursor-wait",i),disabled:l||n,"aria-busy":n,...d,children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("span",{children:"로딩 중..."})]}):c})}},1492:function(e,t,r){"use strict";var s=r(7437),a=r(1994);t.Z=e=>{let{children:t,hover:r=!1,padding:n="md",shadow:o="md",className:i,...l}=e;return(0,s.jsx)("div",{className:(0,a.W)("bg-white rounded-lg transition-all duration-200",{none:"",sm:"p-4",md:"p-6",lg:"p-8"}[n],{none:"",sm:"shadow-sm",md:"shadow-md",lg:"shadow-lg"}[o],r?"hover:shadow-lg hover:-translate-y-1 cursor-pointer":"",i),...l,children:t})}},4804:function(e,t,r){"use strict";var s=r(7437),a=r(1994);t.Z=e=>{let{label:t,error:r,success:n,fullWidth:o=!1,className:i,disabled:l,type:c="text",...d}=e,u={default:"border-gray-300 bg-white focus:border-2 focus:border-primary-500",error:"border-error bg-red-50",success:"border-success bg-green-50",disabled:"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed"},m=o?"w-full":"";return(0,s.jsxs)("div",{className:(0,a.W)("flex flex-col gap-2",m),children:[t&&(0,s.jsx)("label",{className:"text-sm font-bold text-gray-700",children:t}),(0,s.jsx)("input",{type:c,className:(0,a.W)("h-11 px-4 rounded-lg text-base transition-all duration-200 border outline-none",l?u.disabled:r?u.error:n?u.success:u.default,m,i),disabled:l,...d}),r&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-error",children:[(0,s.jsx)("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,s.jsx)("span",{children:r})]}),n&&!r&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-success",children:[(0,s.jsx)("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,s.jsx)("span",{children:n})]})]})}},6898:function(e,t,r){"use strict";r.d(t,{IU:function(){return a},x4:function(){return n}});var s=r(6305);let a=async e=>(await s.x.post("/api/auth/signup",e)).data,n=async e=>(await s.x.post("/api/auth/login",e)).data},6305:function(e,t,r){"use strict";r.d(t,{x:function(){return i}});var s=r(3464),a=r(9375),n=r(7802);let o="http://localhost:4000",i=s.Z.create({baseURL:o,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{let{accessToken:t}=a.t.getState();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,async e=>{var t,r;let l=e.config;if(!e.response)return n.A.error("인터넷 연결을 확인해주세요"),Promise.reject(e);if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!l._retry){l._retry=!0;try{let{refreshToken:e}=a.t.getState();if(!e)throw Error("No refresh token");let{accessToken:t,refreshToken:r}=(await s.Z.post("".concat(o,"/api/auth/refresh"),{refreshToken:e})).data,{user:n}=a.t.getState();return n&&a.t.getState().setAuth(n,t,r),l.headers.Authorization="Bearer ".concat(t),i(l)}catch(e){return a.t.getState().clearAuth(),n.A.error("세션이 만료되었습니다. 다시 로그인해주세요"),window.location.href="/login",Promise.reject(e)}}403===e.response.status&&n.A.error("접근 권한이 없습니다"),404===e.response.status&&n.A.error("요청하신 정보를 찾을 수 없습니다"),e.response.status>=500&&n.A.error("일시적인 오류가 발생했습니다. 잠시 후 다시 시도해주세요");let c=null===(r=e.response.data)||void 0===r?void 0:r.message;if(c&&![401,403,404].includes(e.response.status)){let e=Array.isArray(c)?c[0]:c;n.A.error(e)}return Promise.reject(e)})},9375:function(e,t,r){"use strict";r.d(t,{t:function(){return n}});var s=r(9625),a=r(6885);let n=(0,s.Ue)()((0,a.tJ)(e=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,setAuth:(t,r,s)=>e({user:t,accessToken:r,refreshToken:s,isAuthenticated:!0}),clearAuth:()=>e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1}),updateUser:t=>e(e=>({user:e.user?{...e.user,...t}:null}))}),{name:"auth-storage"}))},7802:function(e,t,r){"use strict";r.d(t,{A:function(){return a},E:function(){return s}});let s=(0,r(9625).Ue)(e=>({toasts:[],addToast:t=>{let r="toast-".concat(Date.now(),"-").concat(Math.random()),s={id:r,duration:3e3,...t};e(e=>({toasts:[...e.toasts,s]})),s.duration&&setTimeout(()=>{e(e=>({toasts:e.toasts.filter(e=>e.id!==r)}))},s.duration)},removeToast:t=>e(e=>({toasts:e.toasts.filter(e=>e.id!==t)})),clearToasts:()=>e({toasts:[]})})),a={success:(e,t)=>s.getState().addToast({type:"success",message:e,duration:t}),error:(e,t)=>s.getState().addToast({type:"error",message:e,duration:t}),warning:(e,t)=>s.getState().addToast({type:"warning",message:e,duration:t}),info:(e,t)=>s.getState().addToast({type:"info",message:e,duration:t})}},1994:function(e,t,r){"use strict";function s(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=function e(t){var r,s,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t){if(Array.isArray(t)){var n=t.length;for(r=0;r<n;r++)t[r]&&(s=e(t[r]))&&(a&&(a+=" "),a+=s)}else for(s in t)t[s]&&(a&&(a+=" "),a+=s)}return a}(e))&&(s&&(s+=" "),s+=t);return s}r.d(t,{W:function(){return s}})}},function(e){e.O(0,[3464,5883,7648,6245,2971,2117,1744],function(){return e(e.s=579)}),_N_E=e.O()}]);