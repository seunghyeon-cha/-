(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1558],{8470:function(e,t,s){Promise.resolve().then(s.bind(s,1879))},1879:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var r=s(7437),a=s(2265),l=s(9376),n=s(9226),i=s(9836),o=s(9375),c=s(7371),d=s(2609),m=s(7802);function g(){let e=(0,l.useRouter)(),{isAuthenticated:t}=(0,o.t)(),[s,g]=(0,a.useState)({category:"FREE",title:"",content:"",images:[],tags:[]}),[x,u]=(0,a.useState)(""),[h,p]=(0,a.useState)(!1);(0,a.useEffect)(()=>{t||(m.A.error("로그인이 필요합니다"),e.push("/login"))},[t]);let b=async t=>{if(t.preventDefault(),!s.title.trim()){m.A.warning("제목을 입력해주세요");return}if(s.title.length<2){m.A.warning("제목은 최소 2자 이상이어야 합니다");return}if(!s.content.trim()){m.A.warning("내용을 입력해주세요");return}if(s.content.length<10){m.A.warning("내용은 최소 10자 이상이어야 합니다");return}try{p(!0);let t=await (0,n.aX)(s);m.A.success("게시글이 작성되었습니다"),e.push("/boards/".concat(t.id))}catch(e){var r,a;console.error("Failed to create board:",e),m.A.error((null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||"게시글 작성에 실패했습니다")}finally{p(!1)}},y=()=>{if(x.trim()){if(s.tags&&s.tags.includes(x.trim())){m.A.warning("이미 추가된 태그입니다");return}g({...s,tags:[...s.tags||[],x.trim()]}),u("")}},f=e=>{var t;g({...s,tags:(null===(t=s.tags)||void 0===t?void 0:t.filter(t=>t!==e))||[]})};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-6 py-10",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("button",{onClick:()=>e.back(),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(0,r.jsx)("span",{children:"뒤로가기"})]}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"게시글 작성"})]}),(0,r.jsxs)("form",{onSubmit:b,className:"bg-white rounded-lg shadow-sm p-8",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("label",{className:"block text-sm font-semibold text-gray-900 mb-3",children:["카테고리 ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["REVIEW","QNA","RESTAURANT","ACCOMMODATION","TOURIST","FREE"].map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>g({...s,category:e}),className:"px-4 py-2 rounded-lg border-2 transition-colors ".concat(s.category===e?"border-primary-500 bg-primary-50 text-primary-700 font-semibold":"border-gray-200 text-gray-700 hover:border-gray-300"),children:i.U[e]},e))})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("label",{htmlFor:"title",className:"block text-sm font-semibold text-gray-900 mb-2",children:["제목 ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",id:"title",value:s.title,onChange:e=>g({...s,title:e.target.value}),placeholder:"제목을 입력하세요 (최소 2자)",maxLength:200,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),(0,r.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:[s.title.length," / 200자"]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("label",{htmlFor:"content",className:"block text-sm font-semibold text-gray-900 mb-2",children:["내용 ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(c.Z,{value:s.content,onChange:e=>g({...s,content:e}),placeholder:"게시글 내용을 입력하세요... (최소 10자)",minHeight:"400px"}),(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"최소 10자 이상 입력해주세요"})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"이미지"}),(0,r.jsx)(d.Z,{onUploadComplete:e=>{g({...s,images:[...s.images||[],...e]})},maxFiles:10}),s.images&&s.images.length>0&&(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-700 mb-2",children:["업로드된 이미지 (",s.images.length,"개)"]}),(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:s.images.map((e,t)=>(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100",children:(0,r.jsx)("img",{src:e,alt:"Uploaded ".concat(t+1),className:"w-full h-full object-cover"})}),(0,r.jsx)("button",{type:"button",onClick:()=>{var e;g({...s,images:null===(e=s.images)||void 0===e?void 0:e.filter((e,s)=>s!==t)})},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:"✕"})]},t))})]})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("label",{htmlFor:"tag",className:"block text-sm font-semibold text-gray-900 mb-2",children:"태그"}),(0,r.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,r.jsx)("input",{type:"text",id:"tag",value:x,onChange:e=>u(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),y())},placeholder:"태그를 입력하고 Enter를 누르세요",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),(0,r.jsx)("button",{type:"button",onClick:y,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"추가"})]}),s.tags&&s.tags.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:s.tags.map(e=>(0,r.jsxs)("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-primary-50 text-primary-700 rounded-full",children:["#",e,(0,r.jsx)("button",{type:"button",onClick:()=>f(e),className:"text-primary-600 hover:text-primary-800",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},e))})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>e.back(),className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"취소"}),(0,r.jsx)("button",{type:"submit",disabled:h,className:"flex-1 px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:bg-gray-300 disabled:cursor-not-allowed",children:h?"작성 중...":"작성 완료"})]})]})]})})}}},function(e){e.O(0,[3572,7902,3464,5883,3583,6617,2971,2117,1744],function(){return e(e.s=8470)}),_N_E=e.O()}]);