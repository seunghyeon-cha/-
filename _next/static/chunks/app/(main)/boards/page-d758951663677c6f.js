(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7519],{2661:function(e,t,a){Promise.resolve().then(a.bind(a,3594))},9376:function(e,t,a){"use strict";var s=a(5475);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},5523:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return s}});let s=a(7043)._(a(2265)).default.createContext(null)},3594:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var s=a(7437),r=a(2265),n=a(9376),o=a(3145),i=a(9226),l=a(9836);function c(){let e=(0,n.useRouter)();(0,n.useSearchParams)();let[t,a]=(0,r.useState)("ALL"),[c,u]=(0,r.useState)("latest"),[d,m]=(0,r.useState)([]),[h,x]=(0,r.useState)({total:0,page:1,limit:20,totalPages:0}),[p,g]=(0,r.useState)(!0),[f,y]=(0,r.useState)(""),b=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3?arguments[3]:void 0;try{g(!0);let r=await (0,i.DC)({category:e,sort:t||c,page:a,limit:20,search:s});m(r.data),x(r.meta)}catch(e){console.error("Failed to fetch boards:",e)}finally{g(!1)}},v=e=>{a(e),b("ALL"===e?void 0:e,c,1,f)},j=e=>{b("ALL"===t?void 0:t,c,e,f),window.scrollTo({top:0,behavior:"smooth"})},N=t=>{e.push("/boards/".concat(t))};(0,r.useEffect)(()=>{b()},[]);let w=[{key:"ALL",label:"전체"},{key:"REVIEW",label:l.U.REVIEW},{key:"QNA",label:l.U.QNA},{key:"RESTAURANT",label:l.U.RESTAURANT},{key:"ACCOMMODATION",label:l.U.ACCOMMODATION},{key:"TOURIST",label:l.U.TOURIST},{key:"FREE",label:l.U.FREE}];return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"커뮤니티"}),(0,s.jsx)("button",{onClick:()=>{e.push("/boards/new")},className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"글쓰기"})]}),(0,s.jsx)("div",{className:"flex gap-4 overflow-x-auto pb-2",children:w.map(e=>(0,s.jsx)("button",{onClick:()=>v(e.key),className:"px-4 py-2 text-sm font-semibold whitespace-nowrap transition-all duration-200 border-b-2 ".concat(t===e.key?"text-primary-600 border-primary-500":"text-gray-600 border-transparent hover:text-gray-900"),children:e.label},e.key))}),(0,s.jsxs)("div",{className:"mt-4 flex items-center gap-4",children:[(0,s.jsx)("form",{onSubmit:e=>{e.preventDefault(),b("ALL"===t?void 0:t,c,1,f)},className:"flex-1 max-w-md",children:(0,s.jsx)("input",{type:"text",value:f,onChange:e=>y(e.target.value),placeholder:"검색어를 입력하세요",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})}),(0,s.jsxs)("select",{value:c,onChange:e=>{let a=e.target.value;u(a),b("ALL"===t?void 0:t,a,1,f)},className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,s.jsx)("option",{value:"latest",children:"최신순"}),(0,s.jsx)("option",{value:"popular",children:"인기순"}),(0,s.jsx)("option",{value:"views",children:"조회순"})]})]}),(0,s.jsxs)("div",{className:"mt-4 text-sm text-gray-600",children:["총 ",(0,s.jsx)("span",{className:"font-semibold text-gray-900",children:h.total}),"개의 게시글"]})]})}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:p?(0,s.jsx)("div",{className:"space-y-4",children:Array.from({length:10}).map((e,t)=>(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm animate-pulse",children:[(0,s.jsx)("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-3"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]},t))}):d.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"space-y-4",children:d.map(e=>(0,s.jsx)("div",{onClick:()=>N(e.id),className:"bg-white rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow cursor-pointer",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"px-2 py-1 bg-primary-50 text-primary-600 text-xs font-semibold rounded",children:l.U[e.category]}),e.isPinned&&(0,s.jsx)("span",{className:"px-2 py-1 bg-yellow-50 text-yellow-600 text-xs font-semibold rounded",children:"\uD83D\uDCCC 공지"})]}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),(0,s.jsx)("p",{className:"text-gray-600 text-sm line-clamp-2 mb-3",children:e.content}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,s.jsx)("span",{children:e.user.name}),(0,s.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString()}),(0,s.jsxs)("span",{children:["조회 ",e.views]}),(0,s.jsxs)("span",{children:["좋아요 ",e.likesCount]}),(0,s.jsxs)("span",{children:["댓글 ",e.commentsCount]})]})]}),e.images&&e.images.length>0&&(0,s.jsx)("div",{className:"ml-4 relative w-24 h-24 flex-shrink-0 bg-gray-100",children:(0,s.jsx)(o.default,{src:e.images[0],alt:e.title,fill:!0,className:"rounded-lg object-cover",sizes:"96px",onError:e=>{e.target.style.display="none"},unoptimized:!0})})]})},e.id))}),(0,s.jsx)("div",{className:"mt-8 flex justify-center gap-2",children:Array.from({length:h.totalPages},(e,t)=>t+1).map(e=>(0,s.jsx)("button",{onClick:()=>j(e),className:"px-4 py-2 rounded-lg ".concat(h.page===e?"bg-primary-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"),children:e},e))})]}):(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,s.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"게시글이 없습니다"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"첫 번째 게시글을 작성해보세요!"})]})})]})}},9226:function(e,t,a){"use strict";a.d(t,{DC:function(){return r},IK:function(){return u},L1:function(){return l},WU:function(){return n},aX:function(){return o},uW:function(){return c},wN:function(){return i}});var s=a(6305);let r=async e=>(await s.x.get("/api/boards",{params:e})).data,n=async e=>(await s.x.get("/api/boards/".concat(e))).data,o=async e=>(await s.x.post("/api/boards",e)).data,i=async(e,t)=>(await s.x.put("/api/boards/".concat(e),t)).data,l=async e=>(await s.x.delete("/api/boards/".concat(e))).data,c=async e=>(await s.x.post("/api/boards/".concat(e,"/like"))).data,u=async e=>(await s.x.get("/api/boards/".concat(e,"/like/check"))).data},6305:function(e,t,a){"use strict";a.d(t,{x:function(){return i}});var s=a(3464),r=a(9375),n=a(7802);let o="http://localhost:4000",i=s.Z.create({baseURL:o,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{let{accessToken:t}=r.t.getState();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,async e=>{var t,a;let l=e.config;if(!e.response)return n.A.error("인터넷 연결을 확인해주세요"),Promise.reject(e);if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!l._retry){l._retry=!0;try{let{refreshToken:e}=r.t.getState();if(!e)throw Error("No refresh token");let{accessToken:t,refreshToken:a}=(await s.Z.post("".concat(o,"/api/auth/refresh"),{refreshToken:e})).data,{user:n}=r.t.getState();return n&&r.t.getState().setAuth(n,t,a),l.headers.Authorization="Bearer ".concat(t),i(l)}catch(e){return r.t.getState().clearAuth(),n.A.error("세션이 만료되었습니다. 다시 로그인해주세요"),window.location.href="/login",Promise.reject(e)}}403===e.response.status&&n.A.error("접근 권한이 없습니다"),404===e.response.status&&n.A.error("요청하신 정보를 찾을 수 없습니다"),e.response.status>=500&&n.A.error("일시적인 오류가 발생했습니다. 잠시 후 다시 시도해주세요");let c=null===(a=e.response.data)||void 0===a?void 0:a.message;if(c&&![401,403,404].includes(e.response.status)){let e=Array.isArray(c)?c[0]:c;n.A.error(e)}return Promise.reject(e)})},9375:function(e,t,a){"use strict";a.d(t,{t:function(){return n}});var s=a(9625),r=a(6885);let n=(0,s.Ue)()((0,r.tJ)(e=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,setAuth:(t,a,s)=>e({user:t,accessToken:a,refreshToken:s,isAuthenticated:!0}),clearAuth:()=>e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1}),updateUser:t=>e(e=>({user:e.user?{...e.user,...t}:null}))}),{name:"auth-storage"}))},7802:function(e,t,a){"use strict";a.d(t,{A:function(){return r},E:function(){return s}});let s=(0,a(9625).Ue)(e=>({toasts:[],addToast:t=>{let a="toast-".concat(Date.now(),"-").concat(Math.random()),s={id:a,duration:3e3,...t};e(e=>({toasts:[...e.toasts,s]})),s.duration&&setTimeout(()=>{e(e=>({toasts:e.toasts.filter(e=>e.id!==a)}))},s.duration)},removeToast:t=>e(e=>({toasts:e.toasts.filter(e=>e.id!==t)})),clearToasts:()=>e({toasts:[]})})),r={success:(e,t)=>s.getState().addToast({type:"success",message:e,duration:t}),error:(e,t)=>s.getState().addToast({type:"error",message:e,duration:t}),warning:(e,t)=>s.getState().addToast({type:"warning",message:e,duration:t}),info:(e,t)=>s.getState().addToast({type:"info",message:e,duration:t})}},9836:function(e,t,a){"use strict";a.d(t,{U:function(){return s}});let s={REVIEW:"여행 후기",QNA:"질문/답변",RESTAURANT:"맛집 추천",ACCOMMODATION:"숙소 추천",TOURIST:"관광지 정보",FREE:"자유 게시판"}}},function(e){e.O(0,[3464,5883,3145,2971,2117,1744],function(){return e(e.s=2661)}),_N_E=e.O()}]);