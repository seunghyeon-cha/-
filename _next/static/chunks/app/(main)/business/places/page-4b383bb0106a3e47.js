(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2100],{7490:function(e,s,t){Promise.resolve().then(t.bind(t,8533))},9376:function(e,s,t){"use strict";var a=t(5475);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},8533:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return o}});var a=t(7437),r=t(2265),n=t(7648),i=t(9376),l=t(5188),c=t(7802);function o(){(0,i.useRouter)();let[e,s]=(0,r.useState)([]),[t,o]=(0,r.useState)(!0);(0,r.useEffect)(()=>{d()},[]);let d=async()=>{try{o(!0);let e=await (0,l.C3)();s(e)}catch(e){console.error("Failed to load places:",e),c.A.error("업장 목록을 불러오는데 실패했습니다")}finally{o(!1)}},u=e=>(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-yellow-400",children:"★"}),(0,a.jsx)("span",{className:"font-semibold",children:e.toFixed(1)})]});return t?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-48 mb-4 animate-pulse"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-64 animate-pulse"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,s)=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[(0,a.jsx)("div",{className:"h-48 bg-gray-200 animate-pulse"}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2 animate-pulse"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-2 animate-pulse"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 animate-pulse"})]})]},s))})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"내 업장 관리"}),(0,a.jsxs)("p",{className:"mt-1 text-sm text-gray-600",children:["총 ",e.length,"개의 업장"]})]}),(0,a.jsx)("div",{className:"flex gap-3",children:(0,a.jsx)("button",{disabled:!0,className:"px-4 py-2 bg-gray-300 text-gray-500 rounded-lg cursor-not-allowed",title:"업장 등록 기능은 향후 추가될 예정입니다",children:"업장 등록"})})]}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:["\uD83D\uDCA1 ",(0,a.jsx)("strong",{children:"참고:"})," 업장 등록 기능은 향후 추가될 예정입니다. 현재는 등록된 업장의 통계 확인 및 프로모션 관리만 가능합니다."]})})]}),0===e.length?(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDFEA"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"등록된 업장이 없습니다"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"사업자 인증 승인 후 업장을 등록하여 관리를 시작하세요"}),(0,a.jsx)("button",{disabled:!0,className:"inline-block px-6 py-3 bg-gray-300 text-gray-500 rounded-lg cursor-not-allowed",children:"업장 등록 (향후 제공)"})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden group",children:[(0,a.jsx)(n.default,{href:"/business/places/".concat(e.id),className:"block relative h-48 bg-gray-200 overflow-hidden",children:e.images&&e.images[0]?(0,a.jsx)("img",{src:e.images[0],alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:(0,a.jsx)("span",{className:"text-4xl",children:"\uD83C\uDFEA"})})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)(n.default,{href:"/business/places/".concat(e.id),className:"block mb-2",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-primary-600 transition-colors line-clamp-1",children:e.name})}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.address}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[(0,a.jsxs)("div",{className:"text-center p-2 bg-gray-50 rounded",children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"평점"}),(0,a.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:u(e.avgRating)})]}),(0,a.jsxs)("div",{className:"text-center p-2 bg-gray-50 rounded",children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"리뷰"}),(0,a.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:e.reviewCount})]}),(0,a.jsxs)("div",{className:"text-center p-2 bg-gray-50 rounded",children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"북마크"}),(0,a.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:e.bookmarkCount})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)(n.default,{href:"/business/places/".concat(e.id),className:"px-3 py-2 text-sm font-medium text-primary-600 bg-primary-50 hover:bg-primary-100 rounded-lg transition-colors text-center",children:"상세 통계"}),(0,a.jsx)(n.default,{href:"/business/promotions?placeId=".concat(e.id),className:"px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors text-center",children:"프로모션"})]})]})]},e.id))})]})}},5188:function(e,s,t){"use strict";t.d(s,{$e:function(){return r},Ai:function(){return n},C3:function(){return i},Qx:function(){return c},V_:function(){return l},j_:function(){return o}});var a=t(6305);let r=async e=>(await a.x.post("/api/business/verify",e)).data,n=async()=>(await a.x.get("/api/business/verify/status")).data,i=async()=>(await a.x.get("/api/business/places")).data,l=async()=>(await a.x.get("/api/business/stats")).data,c=async()=>(await a.x.get("/api/business/stats/places")).data,o=async e=>(await a.x.get("/api/business/stats/places/".concat(e))).data},6305:function(e,s,t){"use strict";t.d(s,{x:function(){return l}});var a=t(3464),r=t(9375),n=t(7802);let i="http://localhost:4000",l=a.Z.create({baseURL:i,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let{accessToken:s}=r.t.getState();return s&&(e.headers.Authorization="Bearer ".concat(s)),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,async e=>{var s,t;let c=e.config;if(!e.response)return n.A.error("인터넷 연결을 확인해주세요"),Promise.reject(e);if((null===(s=e.response)||void 0===s?void 0:s.status)===401&&!c._retry){c._retry=!0;try{let{refreshToken:e}=r.t.getState();if(!e)throw Error("No refresh token");let{accessToken:s,refreshToken:t}=(await a.Z.post("".concat(i,"/api/auth/refresh"),{refreshToken:e})).data,{user:n}=r.t.getState();return n&&r.t.getState().setAuth(n,s,t),c.headers.Authorization="Bearer ".concat(s),l(c)}catch(e){return r.t.getState().clearAuth(),n.A.error("세션이 만료되었습니다. 다시 로그인해주세요"),window.location.href="/login",Promise.reject(e)}}403===e.response.status&&n.A.error("접근 권한이 없습니다"),404===e.response.status&&n.A.error("요청하신 정보를 찾을 수 없습니다"),e.response.status>=500&&n.A.error("일시적인 오류가 발생했습니다. 잠시 후 다시 시도해주세요");let o=null===(t=e.response.data)||void 0===t?void 0:t.message;if(o&&![401,403,404].includes(e.response.status)){let e=Array.isArray(o)?o[0]:o;n.A.error(e)}return Promise.reject(e)})},9375:function(e,s,t){"use strict";t.d(s,{t:function(){return n}});var a=t(9625),r=t(6885);let n=(0,a.Ue)()((0,r.tJ)(e=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,setAuth:(s,t,a)=>e({user:s,accessToken:t,refreshToken:a,isAuthenticated:!0}),clearAuth:()=>e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1}),updateUser:s=>e(e=>({user:e.user?{...e.user,...s}:null}))}),{name:"auth-storage"}))},7802:function(e,s,t){"use strict";t.d(s,{A:function(){return r},E:function(){return a}});let a=(0,t(9625).Ue)(e=>({toasts:[],addToast:s=>{let t="toast-".concat(Date.now(),"-").concat(Math.random()),a={id:t,duration:3e3,...s};e(e=>({toasts:[...e.toasts,a]})),a.duration&&setTimeout(()=>{e(e=>({toasts:e.toasts.filter(e=>e.id!==t)}))},a.duration)},removeToast:s=>e(e=>({toasts:e.toasts.filter(e=>e.id!==s)})),clearToasts:()=>e({toasts:[]})})),r={success:(e,s)=>a.getState().addToast({type:"success",message:e,duration:s}),error:(e,s)=>a.getState().addToast({type:"error",message:e,duration:s}),warning:(e,s)=>a.getState().addToast({type:"warning",message:e,duration:s}),info:(e,s)=>a.getState().addToast({type:"info",message:e,duration:s})}}},function(e){e.O(0,[3464,5883,7648,2971,2117,1744],function(){return e(e.s=7490)}),_N_E=e.O()}]);