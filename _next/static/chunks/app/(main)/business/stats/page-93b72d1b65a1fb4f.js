(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7224],{9233:function(e,t,s){Promise.resolve().then(s.bind(s,7883))},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},7883:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(7437),r=s(2265),n=s(9376),i=s(5188),l=s(7802);function c(){let e=(0,n.useRouter)(),[t,s]=(0,r.useState)(null),[c,d]=(0,r.useState)([]),[o,u]=(0,r.useState)(!0);(0,r.useEffect)(()=>{x()},[]);let x=async()=>{try{u(!0);let[e,t]=await Promise.all([(0,i.V_)(),(0,i.Qx)()]);s(e),d(t)}catch(e){console.error("Failed to fetch stats:",e),l.A.error("통계 조회에 실패했습니다")}finally{u(!1)}};return o?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:Array.from({length:4}).map((e,t)=>(0,a.jsx)("div",{className:"h-24 bg-gray-200 rounded"},t))})]})})}):t&&0!==c.length?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-8",children:"통계 대시보드"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"총 업장 수"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:t.totalPlaces})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"평균 평점"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:t.avgRating.toFixed(1)})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"총 리뷰 수"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:t.totalReviews})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"총 북마크 수"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:t.totalBookmarks})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"})})})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"업장별 통계"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"업장명"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"평균 평점"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"리뷰 수"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"북마크"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"액션"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(t=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:t.placeName})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-yellow-500 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),(0,a.jsx)("span",{className:"text-sm text-gray-900",children:t.avgRating.toFixed(1)})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:t.reviewCount})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:t.bookmarkCount})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[(0,a.jsx)("button",{onClick:()=>e.push("/places/".concat(t.placeId)),className:"text-primary-600 hover:text-primary-900 mr-3",children:"보기"}),(0,a.jsx)("button",{onClick:()=>e.push("/places/".concat(t.placeId,"/edit")),className:"text-gray-600 hover:text-gray-900",children:"수정"})]})]},t.placeId))})]})})]})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"통계 데이터가 없습니다"}),(0,a.jsx)("button",{onClick:()=>e.push("/places/new"),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"업장 등록하기"})]})})}},5188:function(e,t,s){"use strict";s.d(t,{$e:function(){return r},Ai:function(){return n},C3:function(){return i},Qx:function(){return c},V_:function(){return l},j_:function(){return d}});var a=s(6305);let r=async e=>(await a.x.post("/api/business/verify",e)).data,n=async()=>(await a.x.get("/api/business/verify/status")).data,i=async()=>(await a.x.get("/api/business/places")).data,l=async()=>(await a.x.get("/api/business/stats")).data,c=async()=>(await a.x.get("/api/business/stats/places")).data,d=async e=>(await a.x.get("/api/business/stats/places/".concat(e))).data},6305:function(e,t,s){"use strict";s.d(t,{x:function(){return l}});var a=s(3464),r=s(9375),n=s(7802);let i="http://localhost:4000",l=a.Z.create({baseURL:i,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let{accessToken:t}=r.t.getState();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,async e=>{var t,s;let c=e.config;if(!e.response)return n.A.error("인터넷 연결을 확인해주세요"),Promise.reject(e);if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!c._retry){c._retry=!0;try{let{refreshToken:e}=r.t.getState();if(!e)throw Error("No refresh token");let{accessToken:t,refreshToken:s}=(await a.Z.post("".concat(i,"/api/auth/refresh"),{refreshToken:e})).data,{user:n}=r.t.getState();return n&&r.t.getState().setAuth(n,t,s),c.headers.Authorization="Bearer ".concat(t),l(c)}catch(e){return r.t.getState().clearAuth(),n.A.error("세션이 만료되었습니다. 다시 로그인해주세요"),window.location.href="/login",Promise.reject(e)}}403===e.response.status&&n.A.error("접근 권한이 없습니다"),404===e.response.status&&n.A.error("요청하신 정보를 찾을 수 없습니다"),e.response.status>=500&&n.A.error("일시적인 오류가 발생했습니다. 잠시 후 다시 시도해주세요");let d=null===(s=e.response.data)||void 0===s?void 0:s.message;if(d&&![401,403,404].includes(e.response.status)){let e=Array.isArray(d)?d[0]:d;n.A.error(e)}return Promise.reject(e)})},9375:function(e,t,s){"use strict";s.d(t,{t:function(){return n}});var a=s(9625),r=s(6885);let n=(0,a.Ue)()((0,r.tJ)(e=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,setAuth:(t,s,a)=>e({user:t,accessToken:s,refreshToken:a,isAuthenticated:!0}),clearAuth:()=>e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1}),updateUser:t=>e(e=>({user:e.user?{...e.user,...t}:null}))}),{name:"auth-storage"}))},7802:function(e,t,s){"use strict";s.d(t,{A:function(){return r},E:function(){return a}});let a=(0,s(9625).Ue)(e=>({toasts:[],addToast:t=>{let s="toast-".concat(Date.now(),"-").concat(Math.random()),a={id:s,duration:3e3,...t};e(e=>({toasts:[...e.toasts,a]})),a.duration&&setTimeout(()=>{e(e=>({toasts:e.toasts.filter(e=>e.id!==s)}))},a.duration)},removeToast:t=>e(e=>({toasts:e.toasts.filter(e=>e.id!==t)})),clearToasts:()=>e({toasts:[]})})),r={success:(e,t)=>a.getState().addToast({type:"success",message:e,duration:t}),error:(e,t)=>a.getState().addToast({type:"error",message:e,duration:t}),warning:(e,t)=>a.getState().addToast({type:"warning",message:e,duration:t}),info:(e,t)=>a.getState().addToast({type:"info",message:e,duration:t})}}},function(e){e.O(0,[3464,5883,2971,2117,1744],function(){return e(e.s=9233)}),_N_E=e.O()}]);