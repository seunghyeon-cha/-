(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9348],{6055:function(e,s,t){Promise.resolve().then(t.bind(t,7159))},7159:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return x}});var r=t(7437),a=t(2265),n=t(9376),l=t(9501),i=t(3590),o=t(7119),c=t(5188),d=t(7802),u=t(9375);let m=o.Ry({businessNumber:o.Z_().min(10,"사업자 등록번호는 최소 10자 이상이어야 합니다").max(12,"사업자 등록번호는 최대 12자입니다"),businessName:o.Z_().min(2,"상호명을 입력해주세요"),ownerName:o.Z_().min(2,"대표자명을 입력해주세요"),address:o.Z_().min(5,"사업장 주소를 입력해주세요"),documentUrl1:o.Z_().url("올바른 URL을 입력해주세요"),documentUrl2:o.Z_().url("올바른 URL을 입력해주세요").optional().or(o.i0(""))});function x(){let e=(0,n.useRouter)(),{user:s}=(0,u.t)(),[t,o]=(0,a.useState)(null),[x,p]=(0,a.useState)(!0),[h,b]=(0,a.useState)(!1),{register:g,handleSubmit:y,formState:{errors:f}}=(0,l.cI)({resolver:(0,i.F)(m)});(0,a.useEffect)(()=>{j()},[]);let j=async()=>{try{p(!0);let e=await (0,c.Ai)();o(e)}catch(e){console.log("인증 내역 없음")}finally{p(!1)}},N=async e=>{try{b(!0);let s=[e.documentUrl1];e.documentUrl2&&s.push(e.documentUrl2);let t={businessNumber:e.businessNumber,businessName:e.businessName,ownerName:e.ownerName,address:e.address,documents:s};await (0,c.$e)(t),d.A.success("사업자 인증 신청이 완료되었습니다"),await j()}catch(e){var s,t;d.A.error((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.message)||"인증 신청에 실패했습니다")}finally{b(!1)}};return x?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-6 py-8",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-4"}),(0,r.jsx)("div",{className:"h-40 bg-gray-200 rounded"})]})})}):t?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-6 py-8",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-8 shadow-sm",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"사업자 인증 상태"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"상태:"}),"PENDING"===t.status&&(0,r.jsx)("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 text-sm font-semibold rounded-full",children:"검토 중"}),"APPROVED"===t.status&&(0,r.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 text-sm font-semibold rounded-full",children:"승인됨"}),"REJECTED"===t.status&&(0,r.jsx)("span",{className:"px-3 py-1 bg-red-100 text-red-800 text-sm font-semibold rounded-full",children:"거부됨"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"사업자 등록번호"}),(0,r.jsx)("p",{className:"text-base font-medium",children:t.businessNumber})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"상호명"}),(0,r.jsx)("p",{className:"text-base font-medium",children:t.businessName})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"대표자명"}),(0,r.jsx)("p",{className:"text-base font-medium",children:t.ownerName})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"신청일"}),(0,r.jsx)("p",{className:"text-base font-medium",children:new Date(t.createdAt).toLocaleDateString("ko-KR")})]})]}),"REJECTED"===t.status&&t.rejectedReason&&(0,r.jsxs)("div",{className:"mt-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-red-900 mb-1",children:"거부 사유"}),(0,r.jsx)("p",{className:"text-sm text-red-700",children:t.rejectedReason})]}),"APPROVED"===t.status&&(0,r.jsxs)("div",{className:"mt-8 flex gap-4",children:[(0,r.jsx)("button",{onClick:()=>e.push("/business/places"),className:"px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"업장 관리"}),(0,r.jsx)("button",{onClick:()=>e.push("/business/stats"),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"통계 보기"})]}),"REJECTED"===t.status&&(0,r.jsx)("button",{onClick:()=>o(null),className:"mt-6 px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"재신청하기"})]})]})})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-6 py-8",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-8 shadow-sm",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"사업자 인증 신청"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-8",children:"사업자 인증을 완료하면 업장 등록 및 관리 기능을 사용할 수 있습니다."}),(0,r.jsxs)("form",{onSubmit:y(N),className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["사업자 등록번호 ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{...g("businessNumber"),type:"text",placeholder:"123-45-67890",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),f.businessNumber&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:f.businessNumber.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["상호명 ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{...g("businessName"),type:"text",placeholder:"예: 맛있는 식당",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),f.businessName&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:f.businessName.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["대표자명 ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{...g("ownerName"),type:"text",placeholder:"예: 홍길동",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),f.ownerName&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:f.ownerName.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["사업장 주소 ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{...g("address"),type:"text",placeholder:"예: 서울시 강남구...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),f.address&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:f.address.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["사업자등록증 이미지 URL ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{...g("documentUrl1"),type:"url",placeholder:"https://example.com/license.jpg",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),f.documentUrl1&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:f.documentUrl1.message}),(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"이미지 업로드 기능은 추후 제공될 예정입니다. 임시로 URL을 입력해주세요."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"신분증 이미지 URL (선택사항)"}),(0,r.jsx)("input",{...g("documentUrl2"),type:"url",placeholder:"https://example.com/id.jpg",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),f.documentUrl2&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:f.documentUrl2.message})]}),(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-blue-900 mb-1",children:"인증 절차 안내"}),(0,r.jsxs)("ul",{className:"text-xs text-blue-700 space-y-1",children:[(0,r.jsx)("li",{children:"• 신청 후 관리자 검토를 거쳐 1-3일 내에 승인됩니다."}),(0,r.jsx)("li",{children:"• 승인 완료 시 이메일로 알림이 발송됩니다."}),(0,r.jsx)("li",{children:"• 승인 후 업장 등록 및 프로모션 기능을 사용할 수 있습니다."})]})]})]})}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsx)("button",{type:"button",onClick:()=>e.back(),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"취소"}),(0,r.jsx)("button",{type:"submit",disabled:h,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:h?"신청 중...":"인증 신청"})]})]})]})})})}},5188:function(e,s,t){"use strict";t.d(s,{$e:function(){return a},Ai:function(){return n},C3:function(){return l},Qx:function(){return o},V_:function(){return i},j_:function(){return c}});var r=t(6305);let a=async e=>(await r.x.post("/api/business/verify",e)).data,n=async()=>(await r.x.get("/api/business/verify/status")).data,l=async()=>(await r.x.get("/api/business/places")).data,i=async()=>(await r.x.get("/api/business/stats")).data,o=async()=>(await r.x.get("/api/business/stats/places")).data,c=async e=>(await r.x.get("/api/business/stats/places/".concat(e))).data},6305:function(e,s,t){"use strict";t.d(s,{x:function(){return i}});var r=t(3464),a=t(9375),n=t(7802);let l="http://localhost:4000",i=r.Z.create({baseURL:l,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{let{accessToken:s}=a.t.getState();return s&&(e.headers.Authorization="Bearer ".concat(s)),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,async e=>{var s,t;let o=e.config;if(!e.response)return n.A.error("인터넷 연결을 확인해주세요"),Promise.reject(e);if((null===(s=e.response)||void 0===s?void 0:s.status)===401&&!o._retry){o._retry=!0;try{let{refreshToken:e}=a.t.getState();if(!e)throw Error("No refresh token");let{accessToken:s,refreshToken:t}=(await r.Z.post("".concat(l,"/api/auth/refresh"),{refreshToken:e})).data,{user:n}=a.t.getState();return n&&a.t.getState().setAuth(n,s,t),o.headers.Authorization="Bearer ".concat(s),i(o)}catch(e){return a.t.getState().clearAuth(),n.A.error("세션이 만료되었습니다. 다시 로그인해주세요"),window.location.href="/login",Promise.reject(e)}}403===e.response.status&&n.A.error("접근 권한이 없습니다"),404===e.response.status&&n.A.error("요청하신 정보를 찾을 수 없습니다"),e.response.status>=500&&n.A.error("일시적인 오류가 발생했습니다. 잠시 후 다시 시도해주세요");let c=null===(t=e.response.data)||void 0===t?void 0:t.message;if(c&&![401,403,404].includes(e.response.status)){let e=Array.isArray(c)?c[0]:c;n.A.error(e)}return Promise.reject(e)})},9375:function(e,s,t){"use strict";t.d(s,{t:function(){return n}});var r=t(9625),a=t(6885);let n=(0,r.Ue)()((0,a.tJ)(e=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,setAuth:(s,t,r)=>e({user:s,accessToken:t,refreshToken:r,isAuthenticated:!0}),clearAuth:()=>e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1}),updateUser:s=>e(e=>({user:e.user?{...e.user,...s}:null}))}),{name:"auth-storage"}))},7802:function(e,s,t){"use strict";t.d(s,{A:function(){return a},E:function(){return r}});let r=(0,t(9625).Ue)(e=>({toasts:[],addToast:s=>{let t="toast-".concat(Date.now(),"-").concat(Math.random()),r={id:t,duration:3e3,...s};e(e=>({toasts:[...e.toasts,r]})),r.duration&&setTimeout(()=>{e(e=>({toasts:e.toasts.filter(e=>e.id!==t)}))},r.duration)},removeToast:s=>e(e=>({toasts:e.toasts.filter(e=>e.id!==s)})),clearToasts:()=>e({toasts:[]})})),a={success:(e,s)=>r.getState().addToast({type:"success",message:e,duration:s}),error:(e,s)=>r.getState().addToast({type:"error",message:e,duration:s}),warning:(e,s)=>r.getState().addToast({type:"warning",message:e,duration:s}),info:(e,s)=>r.getState().addToast({type:"info",message:e,duration:s})}}},function(e){e.O(0,[3464,5883,6245,2971,2117,1744],function(){return e(e.s=6055)}),_N_E=e.O()}]);