(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4924],{7645:function(e,t,s){Promise.resolve().then(s.bind(s,138))},138:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var r=s(7437),a=s(2265),n=s(9376),i=s(9501),o=s(3590),l=s(7119),c=s(5744),d=s(7802),u=s(9375);let m=l.Ry({title:l.Z_().min(2,"제목은 최소 2자 이상이어야 합니다").max(100),startDate:l.Z_().min(1,"시작 날짜를 선택해주세요"),endDate:l.Z_().min(1,"종료 날짜를 선택해주세요"),region:l.Z_().min(2,"지역을 입력해주세요"),isPublic:l.O7().optional()}).refine(e=>!e.startDate||!e.endDate||new Date(e.startDate)<=new Date(e.endDate),{message:"종료 날짜는 시작 날짜보다 이후여야 합니다",path:["endDate"]});function x(){let e=(0,n.useRouter)(),{isAuthenticated:t}=(0,u.t)(),[s,l]=(0,a.useState)(!1),{register:x,handleSubmit:h,watch:p,formState:{errors:g}}=(0,i.cI)({resolver:(0,o.F)(m),defaultValues:{isPublic:!1}});if(!t)return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md max-w-md text-center",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-yellow-500 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"로그인이 필요합니다"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"여행 일정을 만들려면 로그인이 필요합니다."}),(0,r.jsx)("button",{onClick:()=>e.push("/login"),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"로그인하기"})]})});let y=p("startDate"),b=p("endDate"),f=()=>{if(y&&b){let e=new Date(y);return Math.ceil(Math.abs(new Date(b).getTime()-e.getTime())/864e5)+1}return 0},j=async t=>{try{l(!0);let s=await (0,c.fw)(t);d.A.success("여행 일정이 성공적으로 생성되었습니다"),e.push("/itinerary/".concat(s.id))}catch(e){var s,r;console.error("Failed to create itinerary:",e),d.A.error((null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||"일정 생성에 실패했습니다")}finally{l(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-6 py-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"새 여행 일정"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"여행 계획을 세워보세요"})]})}),(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-6 py-8",children:(0,r.jsxs)("form",{onSubmit:h(j),className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"기본 정보"}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["제목 ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{...x("title"),type:"text",placeholder:"예: 2025 제주도 가족 여행",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),g.title&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:g.title.message})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["지역 ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{...x("region"),type:"text",placeholder:"예: 제주도",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),g.region&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:g.region.message})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"일정 정보"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["시작 날짜 ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{...x("startDate"),type:"date",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),g.startDate&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:g.startDate.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["종료 날짜 ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{...x("endDate"),type:"date",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),g.endDate&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:g.endDate.message})]})]}),f()>0&&(0,r.jsxs)("div",{className:"mb-4 p-4 bg-primary-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-primary-700",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsxs)("span",{className:"font-semibold",children:[f(),"일 일정"]})]}),(0,r.jsxs)("p",{className:"mt-1 text-sm text-gray-600",children:[new Date(y).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})," - ",new Date(b).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"공개 설정"}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("input",{...x("isPublic"),type:"checkbox",id:"isPublic",className:"w-5 h-5 text-primary-600 border-gray-300 rounded focus:ring-2 focus:ring-primary-500"}),(0,r.jsx)("label",{htmlFor:"isPublic",className:"text-sm text-gray-700",children:"이 일정을 다른 사람들에게 공개합니다"})]}),(0,r.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"공개 설정 시 다른 사용자들이 귀하의 여행 일정을 볼 수 있습니다."})]}),(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-blue-900 mb-1",children:"일정 생성 후 세부 사항 추가"}),(0,r.jsx)("p",{className:"text-xs text-blue-700",children:"일정을 생성한 후 각 날짜별로 방문할 장소를 추가하고 상세한 계획을 세울 수 있습니다."})]})]})}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsx)("button",{type:"button",onClick:()=>e.back(),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"취소"}),(0,r.jsx)("button",{type:"submit",disabled:s,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s?"생성 중...":"일정 생성"})]})]})})]})}},6305:function(e,t,s){"use strict";s.d(t,{x:function(){return o}});var r=s(3464),a=s(9375),n=s(7802);let i="http://localhost:4000",o=r.Z.create({baseURL:i,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{let{accessToken:t}=a.t.getState();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,async e=>{var t,s;let l=e.config;if(!e.response)return n.A.error("인터넷 연결을 확인해주세요"),Promise.reject(e);if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!l._retry){l._retry=!0;try{let{refreshToken:e}=a.t.getState();if(!e)throw Error("No refresh token");let{accessToken:t,refreshToken:s}=(await r.Z.post("".concat(i,"/api/auth/refresh"),{refreshToken:e})).data,{user:n}=a.t.getState();return n&&a.t.getState().setAuth(n,t,s),l.headers.Authorization="Bearer ".concat(t),o(l)}catch(e){return a.t.getState().clearAuth(),n.A.error("세션이 만료되었습니다. 다시 로그인해주세요"),window.location.href="/login",Promise.reject(e)}}403===e.response.status&&n.A.error("접근 권한이 없습니다"),404===e.response.status&&n.A.error("요청하신 정보를 찾을 수 없습니다"),e.response.status>=500&&n.A.error("일시적인 오류가 발생했습니다. 잠시 후 다시 시도해주세요");let c=null===(s=e.response.data)||void 0===s?void 0:s.message;if(c&&![401,403,404].includes(e.response.status)){let e=Array.isArray(c)?c[0]:c;n.A.error(e)}return Promise.reject(e)})},5744:function(e,t,s){"use strict";s.d(t,{fm:function(){return n},fw:function(){return i},hK:function(){return l},mB:function(){return o},y:function(){return a}});var r=s(6305);let a=async e=>(await r.x.get("/api/itinerary",{params:e})).data,n=async e=>(await r.x.get("/api/itinerary/".concat(e))).data,i=async e=>(await r.x.post("/api/itinerary",e)).data,o=async(e,t)=>(await r.x.put("/api/itinerary/".concat(e),t)).data,l=async e=>(await r.x.delete("/api/itinerary/".concat(e))).data},9375:function(e,t,s){"use strict";s.d(t,{t:function(){return n}});var r=s(9625),a=s(6885);let n=(0,r.Ue)()((0,a.tJ)(e=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,setAuth:(t,s,r)=>e({user:t,accessToken:s,refreshToken:r,isAuthenticated:!0}),clearAuth:()=>e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1}),updateUser:t=>e(e=>({user:e.user?{...e.user,...t}:null}))}),{name:"auth-storage"}))},7802:function(e,t,s){"use strict";s.d(t,{A:function(){return a},E:function(){return r}});let r=(0,s(9625).Ue)(e=>({toasts:[],addToast:t=>{let s="toast-".concat(Date.now(),"-").concat(Math.random()),r={id:s,duration:3e3,...t};e(e=>({toasts:[...e.toasts,r]})),r.duration&&setTimeout(()=>{e(e=>({toasts:e.toasts.filter(e=>e.id!==s)}))},r.duration)},removeToast:t=>e(e=>({toasts:e.toasts.filter(e=>e.id!==t)})),clearToasts:()=>e({toasts:[]})})),a={success:(e,t)=>r.getState().addToast({type:"success",message:e,duration:t}),error:(e,t)=>r.getState().addToast({type:"error",message:e,duration:t}),warning:(e,t)=>r.getState().addToast({type:"warning",message:e,duration:t}),info:(e,t)=>r.getState().addToast({type:"info",message:e,duration:t})}}},function(e){e.O(0,[3464,5883,6245,2971,2117,1744],function(){return e(e.s=7645)}),_N_E=e.O()}]);