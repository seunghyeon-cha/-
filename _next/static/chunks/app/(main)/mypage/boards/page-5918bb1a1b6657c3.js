(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3797],{6131:function(e,t,s){Promise.resolve().then(s.bind(s,5704))},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},5704:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var a=s(7437),r=s(2265),n=s(9376),i=s(7648),o=s(9032),c=s(9226),l=s(9836),d=s(9064),u=s(9731);function m(){let e=(0,n.useRouter)(),[t,s]=(0,r.useState)([]),[m,p]=(0,r.useState)(!0),[h,x]=(0,r.useState)(""),[g,f]=(0,r.useState)("latest"),[y,b]=(0,r.useState)(1),[v,w]=(0,r.useState)(1);(0,r.useEffect)(()=>{j()},[y,g]);let j=async()=>{try{p(!0);let e=await (0,o.C)({page:y,limit:10,sort:"latest"===g?"latest":"popular"});s(e.boards),w(e.pagination.totalPages)}catch(e){console.error("Failed to load boards:",e),d.Am.error("게시글을 불러오는데 실패했습니다")}finally{p(!1)}},N=async(e,t)=>{if(confirm('"'.concat(t,'" 게시글을 삭제하시겠습니까?')))try{await (0,c.L1)(e),d.Am.success("게시글이 삭제되었습니다"),j()}catch(e){console.error("Failed to delete board:",e),d.Am.error("게시글 삭제에 실패했습니다")}},A=t.filter(e=>{if(!h)return!0;let t=h.toLowerCase();return e.title.toLowerCase().includes(t)||e.content.toLowerCase().includes(t)}),C=[...A].sort((e,t)=>"views"===g?(t.views||0)-(e.views||0):0);return m?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-48 mb-4 animate-pulse"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-64 animate-pulse"})]}),[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-3 animate-pulse"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-2 animate-pulse"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3 mb-4 animate-pulse"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-16 animate-pulse"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-16 animate-pulse"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-16 animate-pulse"})]})]},t))]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"내가 쓴 글"}),(0,a.jsxs)("p",{className:"mt-1 text-sm text-gray-600",children:["총 ",A.length,"개의 게시글"]})]}),(0,a.jsx)(i.default,{href:"/boards/new",className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"+ 새 글 작성"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("input",{type:"text",value:h,onChange:e=>x(e.target.value),placeholder:"제목 또는 내용으로 검색...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})}),(0,a.jsxs)("select",{value:g,onChange:e=>f(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,a.jsx)("option",{value:"latest",children:"최신순"}),(0,a.jsx)("option",{value:"popular",children:"인기순 (좋아요)"}),(0,a.jsx)("option",{value:"views",children:"조회수순"})]})]})]}),0===C.length?(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCDD"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:h?"검색 결과가 없습니다":"작성한 게시글이 없습니다"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:h?"다른 검색어로 시도해보세요":"첫 게시글을 작성하여 다른 여행자들과 소통해보세요"}),!h&&(0,a.jsx)(i.default,{href:"/boards/new",className:"inline-block px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"첫 게시글 작성하기"})]}):(0,a.jsx)("div",{className:"space-y-4",children:C.map(t=>{var s;return(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"px-3 py-1 bg-primary-100 text-primary-700 text-xs font-medium rounded-full",children:l.U[t.category]}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:new Date(t.createdAt).toLocaleDateString("ko-KR")})]}),(0,a.jsx)(i.default,{href:"/boards/".concat(t.id),className:"block group",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-primary-600 mb-2 transition-colors",children:t.title})}),(0,a.jsxs)("p",{className:"text-gray-600 text-sm line-clamp-2 mb-4",children:[t.content.replace(/<[^>]*>/g,"").substring(0,150),t.content.length>150?"...":""]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex gap-4 text-sm text-gray-500",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:["\uD83D\uDC41 ",t.views||0]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:["\uD83D\uDC4D ",t.likesCount||0]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:["\uD83D\uDCAC ",(null===(s=t._count)||void 0===s?void 0:s.comments)||0]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>e.push("/boards/".concat(t.id,"/edit")),className:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded transition-colors",children:"수정"}),(0,a.jsx)("button",{onClick:()=>N(t.id,t.title),className:"px-3 py-1.5 text-sm font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded transition-colors",children:"삭제"})]})]})]})},t.id)})}),!m&&v>1&&(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(u.Z,{currentPage:y,totalPages:v,onPageChange:b})})]})}},9731:function(e,t,s){"use strict";var a=s(7437);t.Z=e=>{let{currentPage:t,totalPages:s,onPageChange:r}=e;return s<=1?null:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-8",children:[(0,a.jsx)("button",{onClick:()=>r(t-1),disabled:1===t,className:"px-4 py-2 rounded-lg border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:"이전"}),(()=>{let e=[];if(s<=5)for(let t=1;t<=s;t++)e.push(t);else{e.push(1),t>3&&e.push("...");for(let a=Math.max(2,t-1);a<=Math.min(s-1,t+1);a++)e.push(a);t<s-2&&e.push("..."),e.push(s)}return e})().map((e,s)=>{if("..."===e)return(0,a.jsx)("span",{className:"px-2 text-gray-500",children:"..."},"ellipsis-".concat(s));let n=e===t;return(0,a.jsx)("button",{onClick:()=>r(e),className:"px-4 py-2 rounded-lg border transition-colors ".concat(n?"bg-primary-500 text-white border-primary-500":"border-gray-300 hover:bg-gray-50"),children:e},e)}),(0,a.jsx)("button",{onClick:()=>r(t+1),disabled:t===s,className:"px-4 py-2 rounded-lg border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:"다음"})]})}},9226:function(e,t,s){"use strict";s.d(t,{DC:function(){return r},IK:function(){return d},L1:function(){return c},WU:function(){return n},aX:function(){return i},uW:function(){return l},wN:function(){return o}});var a=s(6305);let r=async e=>(await a.x.get("/api/boards",{params:e})).data,n=async e=>(await a.x.get("/api/boards/".concat(e))).data,i=async e=>(await a.x.post("/api/boards",e)).data,o=async(e,t)=>(await a.x.put("/api/boards/".concat(e),t)).data,c=async e=>(await a.x.delete("/api/boards/".concat(e))).data,l=async e=>(await a.x.post("/api/boards/".concat(e,"/like"))).data,d=async e=>(await a.x.get("/api/boards/".concat(e,"/like/check"))).data},6305:function(e,t,s){"use strict";s.d(t,{x:function(){return o}});var a=s(3464),r=s(9375),n=s(7802);let i="http://localhost:4000",o=a.Z.create({baseURL:i,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{let{accessToken:t}=r.t.getState();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,async e=>{var t,s;let c=e.config;if(!e.response)return n.A.error("인터넷 연결을 확인해주세요"),Promise.reject(e);if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!c._retry){c._retry=!0;try{let{refreshToken:e}=r.t.getState();if(!e)throw Error("No refresh token");let{accessToken:t,refreshToken:s}=(await a.Z.post("".concat(i,"/api/auth/refresh"),{refreshToken:e})).data,{user:n}=r.t.getState();return n&&r.t.getState().setAuth(n,t,s),c.headers.Authorization="Bearer ".concat(t),o(c)}catch(e){return r.t.getState().clearAuth(),n.A.error("세션이 만료되었습니다. 다시 로그인해주세요"),window.location.href="/login",Promise.reject(e)}}403===e.response.status&&n.A.error("접근 권한이 없습니다"),404===e.response.status&&n.A.error("요청하신 정보를 찾을 수 없습니다"),e.response.status>=500&&n.A.error("일시적인 오류가 발생했습니다. 잠시 후 다시 시도해주세요");let l=null===(s=e.response.data)||void 0===s?void 0:s.message;if(l&&![401,403,404].includes(e.response.status)){let e=Array.isArray(l)?l[0]:l;n.A.error(e)}return Promise.reject(e)})},9032:function(e,t,s){"use strict";s.d(t,{C:function(){return o},Cp:function(){return i},US:function(){return r},ck:function(){return n},uN:function(){return c}});var a=s(6305);let r=async()=>(await a.x.get("/api/api/users/me/profile")).data,n=async e=>(await a.x.put("/api/api/users/me/profile",e)).data,i=async e=>(await a.x.put("/api/api/users/me/password",e)).data,o=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await a.x.get("/api/api/users/me/boards",{params:e})).data},c=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await a.x.get("/api/api/users/me/reviews",{params:e})).data}},9375:function(e,t,s){"use strict";s.d(t,{t:function(){return n}});var a=s(9625),r=s(6885);let n=(0,a.Ue)()((0,r.tJ)(e=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,setAuth:(t,s,a)=>e({user:t,accessToken:s,refreshToken:a,isAuthenticated:!0}),clearAuth:()=>e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1}),updateUser:t=>e(e=>({user:e.user?{...e.user,...t}:null}))}),{name:"auth-storage"}))},7802:function(e,t,s){"use strict";s.d(t,{A:function(){return r},E:function(){return a}});let a=(0,s(9625).Ue)(e=>({toasts:[],addToast:t=>{let s="toast-".concat(Date.now(),"-").concat(Math.random()),a={id:s,duration:3e3,...t};e(e=>({toasts:[...e.toasts,a]})),a.duration&&setTimeout(()=>{e(e=>({toasts:e.toasts.filter(e=>e.id!==s)}))},a.duration)},removeToast:t=>e(e=>({toasts:e.toasts.filter(e=>e.id!==t)})),clearToasts:()=>e({toasts:[]})})),r={success:(e,t)=>a.getState().addToast({type:"success",message:e,duration:t}),error:(e,t)=>a.getState().addToast({type:"error",message:e,duration:t}),warning:(e,t)=>a.getState().addToast({type:"warning",message:e,duration:t}),info:(e,t)=>a.getState().addToast({type:"info",message:e,duration:t})}},9836:function(e,t,s){"use strict";s.d(t,{U:function(){return a}});let a={REVIEW:"여행 후기",QNA:"질문/답변",RESTAURANT:"맛집 추천",ACCOMMODATION:"숙소 추천",TOURIST:"관광지 정보",FREE:"자유 게시판"}}},function(e){e.O(0,[3464,5883,7648,9064,2971,2117,1744],function(){return e(e.s=6131)}),_N_E=e.O()}]);