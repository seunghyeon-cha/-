(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1214],{836:function(e,t,s){Promise.resolve().then(s.bind(s,908))},908:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(7437),r=s(2265),n=s(7648),l=s(826),o=s(9064),i=s(9731);function c(){let[e,t]=(0,r.useState)([]),[s,c]=(0,r.useState)(!0),[d,u]=(0,r.useState)(1),[m,h]=(0,r.useState)(1);(0,r.useEffect)(()=>{g()},[d]);let g=async()=>{try{c(!0);let e=await (0,l.gV)(d,12);t(e.data),h(e.meta.totalPages)}catch(e){console.error("Failed to load bookmarks:",e),o.Am.error("북마크를 불러오는데 실패했습니다")}finally{c(!1)}},p=async(e,t)=>{if(confirm('"'.concat(t,'" 북마크를 해제하시겠습니까?')))try{await (0,l.Tc)(e),o.Am.success("북마크가 해제되었습니다"),g()}catch(e){console.error("Failed to remove bookmark:",e),o.Am.error("북마크 해제에 실패했습니다")}},x=e=>e?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-yellow-400",children:"★"}),(0,a.jsx)("span",{className:"font-medium",children:e.toFixed(1)})]}):(0,a.jsx)("span",{className:"text-gray-400",children:"평점 없음"});return s?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-48 mb-4 animate-pulse"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-64 animate-pulse"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,t)=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[(0,a.jsx)("div",{className:"h-48 bg-gray-200 animate-pulse"}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2 animate-pulse"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-2 animate-pulse"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 animate-pulse"})]})]},t))})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"북마크"}),(0,a.jsxs)("p",{className:"mt-1 text-sm text-gray-600",children:["총 ",e.length,"개의 장소"]})]}),(0,a.jsx)(n.default,{href:"/places",className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"장소 더 찾기"})]})}),0===e.length?(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDD16"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"북마크한 장소가 없습니다"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"마음에 드는 장소를 북마크하여 나중에 쉽게 찾아보세요"}),(0,a.jsx)(n.default,{href:"/places",className:"inline-block px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"장소 둘러보기"})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden group",children:[(0,a.jsxs)(n.default,{href:"/places/".concat(e.place.id),className:"block relative h-48 bg-gray-200 overflow-hidden",children:[e.place.images&&e.place.images[0]?(0,a.jsx)("img",{src:e.place.images[0],alt:e.place.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:(0,a.jsx)("span",{className:"text-4xl",children:"\uD83D\uDCCD"})}),e.place.category&&(0,a.jsx)("div",{className:"absolute top-3 left-3",children:(0,a.jsx)("span",{className:"px-3 py-1 bg-white/90 backdrop-blur-sm text-xs font-medium text-gray-700 rounded-full",children:e.place.category})})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)(n.default,{href:"/places/".concat(e.place.id),className:"block mb-2",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-primary-600 transition-colors line-clamp-1",children:e.place.name})}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.place.address}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"text-sm",children:x(e.place.averageRating)}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.createdAt).toLocaleDateString("ko-KR")})]}),(0,a.jsx)("button",{onClick:()=>p(e.id,e.place.name),className:"w-full px-4 py-2 text-sm font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors",children:"북마크 해제"})]})]},e.id))}),!s&&m>1&&(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(i.Z,{currentPage:d,totalPages:m,onPageChange:u})})]})}},9731:function(e,t,s){"use strict";var a=s(7437);t.Z=e=>{let{currentPage:t,totalPages:s,onPageChange:r}=e;return s<=1?null:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-8",children:[(0,a.jsx)("button",{onClick:()=>r(t-1),disabled:1===t,className:"px-4 py-2 rounded-lg border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:"이전"}),(()=>{let e=[];if(s<=5)for(let t=1;t<=s;t++)e.push(t);else{e.push(1),t>3&&e.push("...");for(let a=Math.max(2,t-1);a<=Math.min(s-1,t+1);a++)e.push(a);t<s-2&&e.push("..."),e.push(s)}return e})().map((e,s)=>{if("..."===e)return(0,a.jsx)("span",{className:"px-2 text-gray-500",children:"..."},"ellipsis-".concat(s));let n=e===t;return(0,a.jsx)("button",{onClick:()=>r(e),className:"px-4 py-2 rounded-lg border transition-colors ".concat(n?"bg-primary-500 text-white border-primary-500":"border-gray-300 hover:bg-gray-50"),children:e},e)}),(0,a.jsx)("button",{onClick:()=>r(t+1),disabled:t===s,className:"px-4 py-2 rounded-lg border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:"다음"})]})}},826:function(e,t,s){"use strict";s.d(t,{Ke:function(){return l},Tc:function(){return o},gV:function(){return r},sd:function(){return n}});var a=s(6305);let r=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return(await a.x.get("/api/bookmarks",{params:{page:e,limit:t}})).data},n=async e=>(await a.x.get("/api/bookmarks/check/".concat(e))).data,l=async e=>(await a.x.post("/api/bookmarks",{placeId:e})).data,o=async e=>{await a.x.delete("/api/bookmarks/".concat(e))}},6305:function(e,t,s){"use strict";s.d(t,{x:function(){return o}});var a=s(3464),r=s(9375),n=s(7802);let l="http://localhost:4000",o=a.Z.create({baseURL:l,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{let{accessToken:t}=r.t.getState();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,async e=>{var t,s;let i=e.config;if(!e.response)return n.A.error("인터넷 연결을 확인해주세요"),Promise.reject(e);if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!i._retry){i._retry=!0;try{let{refreshToken:e}=r.t.getState();if(!e)throw Error("No refresh token");let{accessToken:t,refreshToken:s}=(await a.Z.post("".concat(l,"/api/auth/refresh"),{refreshToken:e})).data,{user:n}=r.t.getState();return n&&r.t.getState().setAuth(n,t,s),i.headers.Authorization="Bearer ".concat(t),o(i)}catch(e){return r.t.getState().clearAuth(),n.A.error("세션이 만료되었습니다. 다시 로그인해주세요"),window.location.href="/login",Promise.reject(e)}}403===e.response.status&&n.A.error("접근 권한이 없습니다"),404===e.response.status&&n.A.error("요청하신 정보를 찾을 수 없습니다"),e.response.status>=500&&n.A.error("일시적인 오류가 발생했습니다. 잠시 후 다시 시도해주세요");let c=null===(s=e.response.data)||void 0===s?void 0:s.message;if(c&&![401,403,404].includes(e.response.status)){let e=Array.isArray(c)?c[0]:c;n.A.error(e)}return Promise.reject(e)})},9375:function(e,t,s){"use strict";s.d(t,{t:function(){return n}});var a=s(9625),r=s(6885);let n=(0,a.Ue)()((0,r.tJ)(e=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,setAuth:(t,s,a)=>e({user:t,accessToken:s,refreshToken:a,isAuthenticated:!0}),clearAuth:()=>e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1}),updateUser:t=>e(e=>({user:e.user?{...e.user,...t}:null}))}),{name:"auth-storage"}))},7802:function(e,t,s){"use strict";s.d(t,{A:function(){return r},E:function(){return a}});let a=(0,s(9625).Ue)(e=>({toasts:[],addToast:t=>{let s="toast-".concat(Date.now(),"-").concat(Math.random()),a={id:s,duration:3e3,...t};e(e=>({toasts:[...e.toasts,a]})),a.duration&&setTimeout(()=>{e(e=>({toasts:e.toasts.filter(e=>e.id!==s)}))},a.duration)},removeToast:t=>e(e=>({toasts:e.toasts.filter(e=>e.id!==t)})),clearToasts:()=>e({toasts:[]})})),r={success:(e,t)=>a.getState().addToast({type:"success",message:e,duration:t}),error:(e,t)=>a.getState().addToast({type:"error",message:e,duration:t}),warning:(e,t)=>a.getState().addToast({type:"warning",message:e,duration:t}),info:(e,t)=>a.getState().addToast({type:"info",message:e,duration:t})}}},function(e){e.O(0,[3464,5883,7648,9064,2971,2117,1744],function(){return e(e.s=836)}),_N_E=e.O()}]);