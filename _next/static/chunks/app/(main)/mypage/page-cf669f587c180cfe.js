(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7388],{6942:function(e,a,s){Promise.resolve().then(s.bind(s,3986))},3986:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return b}});var t=s(7437),r=s(2265),l=s(9376),i=s(9032),n=s(3145),c=s(7648);function d(e){let{profile:a}=e;return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(()=>{if(a.profileImage)return(0,t.jsx)(n.default,{src:a.profileImage,alt:a.name,width:120,height:120,className:"rounded-full object-cover border-2 border-white shadow-md"});let e=a.name.charAt(0).toUpperCase();return(0,t.jsx)("div",{className:"w-[120px] h-[120px] rounded-full bg-primary-500 flex items-center justify-center text-white text-4xl font-bold border-2 border-white shadow-md",children:e})})()}),(0,t.jsxs)("div",{className:"flex-1 text-center md:text-left",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:a.name}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:a.email}),a.bio&&(0,t.jsx)("p",{className:"text-gray-700 mb-4 line-clamp-3",children:a.bio}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 mt-4",children:[(0,t.jsx)(c.default,{href:"/mypage/edit",className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors text-center",children:"프로필 수정"}),(0,t.jsx)(c.default,{href:"/mypage/password",className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-center",children:"비밀번호 변경"})]})]})]})})}function o(e){let{stats:a}=e,s=[{label:"게시글",value:a.boardsCount,icon:"\uD83D\uDCDD",color:"text-blue-500"},{label:"리뷰",value:a.reviewsCount,icon:"⭐",color:"text-yellow-500"},{label:"북마크",value:a.bookmarksCount,icon:"\uD83D\uDD16",color:"text-red-500"},{label:"좋아요",value:a.likesReceived,icon:"❤️",color:"text-pink-500"}];return(0,t.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:s.map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 text-center hover:shadow-md transition-shadow",children:[(0,t.jsx)("div",{className:"text-4xl mb-2 ".concat(e.color),children:e.icon}),(0,t.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:e.value.toLocaleString()}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:e.label})]},e.label))})}var x=s(826),m=s(1371),u=s(8624),h=s(9731);function p(e){let{initialTab:a="boards"}=e,[s,l]=(0,r.useState)(a),[n,d]=(0,r.useState)(!1),[o,p]=(0,r.useState)(1),[g,b]=(0,r.useState)(1),[f,v]=(0,r.useState)([]),[j,y]=(0,r.useState)([]),[N,w]=(0,r.useState)([]);(0,r.useEffect)(()=>{p(1)},[s]),(0,r.useEffect)(()=>{D()},[s,o]);let D=async()=>{d(!0);try{if("boards"===s){let e=await (0,i.C)({page:o,limit:10});v(e.boards),b(e.pagination.totalPages)}else if("reviews"===s){let e=await (0,i.uN)({page:o,limit:10});y(e.reviews),b(e.pagination.totalPages)}else if("bookmarks"===s){let e=await (0,x.gV)(o,10);w(e.data),b(e.meta.totalPages)}}catch(e){console.error("Failed to load data:",e)}finally{d(!1)}};return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,t.jsx)("div",{className:"border-b border-gray-200",children:(0,t.jsx)("div",{className:"flex",children:[{id:"boards",label:"내 게시글",icon:"\uD83D\uDCDD"},{id:"reviews",label:"내 리뷰",icon:"⭐"},{id:"bookmarks",label:"북마크",icon:"\uD83D\uDD16"}].map(e=>(0,t.jsxs)("button",{onClick:()=>l(e.id),className:"flex-1 px-6 py-4 text-center font-medium transition-colors ".concat(s===e.id?"text-primary-600 border-b-2 border-primary-600":"text-gray-600 hover:text-gray-900"),children:[(0,t.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.id))})}),(0,t.jsx)("div",{className:"p-6",children:n?(0,t.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):"boards"===s?0===f.length?(0,t.jsxs)("div",{className:"text-center py-20",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCDD"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"작성한 게시글이 없습니다"}),(0,t.jsx)(c.default,{href:"/boards/new",className:"inline-block px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"첫 게시글 작성하기"})]}):(0,t.jsx)("div",{className:"space-y-4",children:f.map(e=>{var a;return(0,t.jsxs)(c.default,{href:"/boards/".concat(e.id),className:"block bg-white rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 hover:text-primary-600",children:e.title}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,t.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-2",children:e.content}),(0,t.jsxs)("div",{className:"flex gap-4 text-sm text-gray-500",children:[(0,t.jsxs)("span",{children:["조회 ",e.views||0]}),(0,t.jsxs)("span",{children:["좋아요 ",e.likesCount||0]}),(0,t.jsxs)("span",{children:["댓글 ",(null===(a=e._count)||void 0===a?void 0:a.comments)||0]})]})]},e.id)})}):"reviews"===s?0===j.length?(0,t.jsxs)("div",{className:"text-center py-20",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"⭐"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"작성한 리뷰가 없습니다"}),(0,t.jsx)(c.default,{href:"/places",className:"inline-block px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"장소 둘러보기"})]}):(0,t.jsx)("div",{className:"space-y-4",children:j.map(e=>(0,t.jsx)(m.Z,{review:e},e.id))}):"bookmarks"===s?0===N.length?(0,t.jsxs)("div",{className:"text-center py-20",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDD16"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"북마크한 장소가 없습니다"}),(0,t.jsx)(c.default,{href:"/places",className:"inline-block px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"장소 둘러보기"})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(e=>{var a;return(0,t.jsx)(u.Z,{id:e.place.id,image:null===(a=e.place.images)||void 0===a?void 0:a[0],category:e.place.category,name:e.place.name,address:e.place.address,rating:e.place.averageRating||0,reviewCount:e.place.reviewCount||0,isBookmarked:!0,onClick:e=>window.location.href="/places/".concat(e)},e.id)})}):null}),!n&&g>1&&(0,t.jsx)("div",{className:"p-6 border-t border-gray-200",children:(0,t.jsx)(h.Z,{currentPage:o,totalPages:g,onPageChange:p})})]})}var g=s(9375);function b(){let e=(0,l.useRouter)(),{isAuthenticated:a}=(0,g.t)(),[s,n]=(0,r.useState)(null),[c,x]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(!a){e.push("/login");return}m()},[a,e]);let m=async()=>{try{x(!0);let e=await (0,i.US)();n(e)}catch(s){var a;console.error("Failed to load profile:",s),(null==s?void 0:null===(a=s.response)||void 0===a?void 0:a.status)===401&&e.push("/login")}finally{x(!1)}};return c?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):s?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"마이페이지"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:"내 정보와 활동 내역을 확인하세요"})]}),(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)(d,{profile:s})}),(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)(o,{stats:s.stats})}),(0,t.jsx)("div",{children:(0,t.jsx)(p,{})})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"프로필을 불러올 수 없습니다"}),(0,t.jsx)("button",{onClick:m,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"다시 시도"})]})})}},9032:function(e,a,s){"use strict";s.d(a,{C:function(){return n},Cp:function(){return i},US:function(){return r},ck:function(){return l},uN:function(){return c}});var t=s(6305);let r=async()=>(await t.x.get("/api/api/users/me/profile")).data,l=async e=>(await t.x.put("/api/api/users/me/profile",e)).data,i=async e=>(await t.x.put("/api/api/users/me/password",e)).data,n=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.x.get("/api/api/users/me/boards",{params:e})).data},c=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.x.get("/api/api/users/me/reviews",{params:e})).data}}},function(e){e.O(0,[3464,5883,7648,3145,334,2971,2117,1744],function(){return e(e.s=6942)}),_N_E=e.O()}]);