(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1229],{3894:function(e,s,r){Promise.resolve().then(r.bind(r,3165))},9376:function(e,s,r){"use strict";var t=r(5475);r.o(t,"useParams")&&r.d(s,{useParams:function(){return t.useParams}}),r.o(t,"usePathname")&&r.d(s,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(s,{useSearchParams:function(){return t.useSearchParams}})},3165:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return c}});var t=r(7437),a=r(2265),n=r(9376),o=r(9032),i=r(9375),d=r(7802);function c(){let e=(0,n.useRouter)(),{isAuthenticated:s}=(0,i.t)(),[r,c]=(0,a.useState)(!1),[u,l]=(0,a.useState)({current:!1,new:!1,confirm:!1}),[m,w]=(0,a.useState)({currentPassword:"",newPassword:"",newPasswordConfirm:""}),[p,h]=(0,a.useState)({});(0,a.useEffect)(()=>{s||e.push("/login")},[s,e]);let x=()=>{let e={};return m.currentPassword||(e.currentPassword="현재 비밀번호를 입력하세요"),m.newPassword?m.newPassword.length<8&&(e.newPassword="비밀번호는 최소 8자 이상이어야 합니다"):e.newPassword="새 비밀번호를 입력하세요",m.newPasswordConfirm?m.newPassword!==m.newPasswordConfirm&&(e.newPasswordConfirm="새 비밀번호가 일치하지 않습니다"):e.newPasswordConfirm="새 비밀번호를 다시 입력하세요",m.currentPassword&&m.newPassword&&m.currentPassword===m.newPassword&&(e.newPassword="현재 비밀번호와 다른 비밀번호를 입력하세요"),h(e),0===Object.keys(e).length},f=async s=>{if(s.preventDefault(),x())try{c(!0),await (0,o.Cp)({currentPassword:m.currentPassword,newPassword:m.newPassword}),d.A.success("비밀번호가 성공적으로 변경되었습니다"),e.push("/mypage")}catch(e){var r;console.error("Failed to change password:",e),(null==e?void 0:null===(r=e.response)||void 0===r?void 0:r.status)===401?h({currentPassword:"현재 비밀번호가 일치하지 않습니다"}):d.A.error("비밀번호 변경에 실패했습니다")}finally{c(!1)}},g=e=>{l({...u,[e]:!u[e]})};return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"비밀번호 변경"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:"보안을 위해 주기적으로 비밀번호를 변경하세요"})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-8",children:(0,t.jsxs)("form",{onSubmit:f,children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["현재 비밀번호 ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:u.current?"text":"password",value:m.currentPassword,onChange:e=>w({...m,currentPassword:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent pr-12 ".concat(p.currentPassword?"border-red-500":"border-gray-300"),placeholder:"현재 비밀번호를 입력하세요"}),(0,t.jsx)("button",{type:"button",onClick:()=>g("current"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:u.current?"\uD83D\uDE48":"\uD83D\uDC41️"})]}),p.currentPassword&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:p.currentPassword})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["새 비밀번호 ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:u.new?"text":"password",value:m.newPassword,onChange:e=>w({...m,newPassword:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent pr-12 ".concat(p.newPassword?"border-red-500":"border-gray-300"),placeholder:"새 비밀번호를 입력하세요 (8자 이상)"}),(0,t.jsx)("button",{type:"button",onClick:()=>g("new"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:u.new?"\uD83D\uDE48":"\uD83D\uDC41️"})]}),p.newPassword&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:p.newPassword}),!p.newPassword&&m.newPassword&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,t.jsx)("div",{className:"h-1 flex-1 rounded ".concat(m.newPassword.length>=12?"bg-green-500":m.newPassword.length>=8?"bg-yellow-500":"bg-red-500")}),(0,t.jsx)("span",{className:"text-gray-600",children:m.newPassword.length>=12?"강함":m.newPassword.length>=8?"보통":"약함"})]})})]}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["새 비밀번호 확인 ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:u.confirm?"text":"password",value:m.newPasswordConfirm,onChange:e=>w({...m,newPasswordConfirm:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent pr-12 ".concat(p.newPasswordConfirm?"border-red-500":"border-gray-300"),placeholder:"새 비밀번호를 다시 입력하세요"}),(0,t.jsx)("button",{type:"button",onClick:()=>g("confirm"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:u.confirm?"\uD83D\uDE48":"\uD83D\uDC41️"})]}),p.newPasswordConfirm&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-500",children:p.newPasswordConfirm}),!p.newPasswordConfirm&&m.newPasswordConfirm&&m.newPassword===m.newPasswordConfirm&&(0,t.jsx)("p",{className:"mt-1 text-sm text-green-600",children:"✓ 비밀번호가 일치합니다"})]}),(0,t.jsxs)("div",{className:"mb-8 p-4 bg-blue-50 rounded-lg",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"안전한 비밀번호 만들기"}),(0,t.jsxs)("ul",{className:"text-xs text-blue-700 space-y-1",children:[(0,t.jsx)("li",{children:"• 8자 이상의 비밀번호를 사용하세요"}),(0,t.jsx)("li",{children:"• 영문, 숫자, 특수문자를 조합하세요"}),(0,t.jsx)("li",{children:"• 다른 사이트와 다른 비밀번호를 사용하세요"}),(0,t.jsx)("li",{children:"• 주기적으로 비밀번호를 변경하세요"})]})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{type:"submit",disabled:r,className:"flex-1 px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:r?"변경 중...":"변경"}),(0,t.jsx)("button",{type:"button",onClick:()=>{m.currentPassword||m.newPassword||m.newPasswordConfirm?confirm("변경을 취소하시겠습니까? 입력한 내용이 저장되지 않습니다.")&&e.push("/mypage"):e.push("/mypage")},disabled:r,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:"취소"})]})]})})]})})}},6305:function(e,s,r){"use strict";r.d(s,{x:function(){return i}});var t=r(3464),a=r(9375),n=r(7802);let o="http://localhost:4000",i=t.Z.create({baseURL:o,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{let{accessToken:s}=a.t.getState();return s&&(e.headers.Authorization="Bearer ".concat(s)),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,async e=>{var s,r;let d=e.config;if(!e.response)return n.A.error("인터넷 연결을 확인해주세요"),Promise.reject(e);if((null===(s=e.response)||void 0===s?void 0:s.status)===401&&!d._retry){d._retry=!0;try{let{refreshToken:e}=a.t.getState();if(!e)throw Error("No refresh token");let{accessToken:s,refreshToken:r}=(await t.Z.post("".concat(o,"/api/auth/refresh"),{refreshToken:e})).data,{user:n}=a.t.getState();return n&&a.t.getState().setAuth(n,s,r),d.headers.Authorization="Bearer ".concat(s),i(d)}catch(e){return a.t.getState().clearAuth(),n.A.error("세션이 만료되었습니다. 다시 로그인해주세요"),window.location.href="/login",Promise.reject(e)}}403===e.response.status&&n.A.error("접근 권한이 없습니다"),404===e.response.status&&n.A.error("요청하신 정보를 찾을 수 없습니다"),e.response.status>=500&&n.A.error("일시적인 오류가 발생했습니다. 잠시 후 다시 시도해주세요");let c=null===(r=e.response.data)||void 0===r?void 0:r.message;if(c&&![401,403,404].includes(e.response.status)){let e=Array.isArray(c)?c[0]:c;n.A.error(e)}return Promise.reject(e)})},9032:function(e,s,r){"use strict";r.d(s,{C:function(){return i},Cp:function(){return o},US:function(){return a},ck:function(){return n},uN:function(){return d}});var t=r(6305);let a=async()=>(await t.x.get("/api/api/users/me/profile")).data,n=async e=>(await t.x.put("/api/api/users/me/profile",e)).data,o=async e=>(await t.x.put("/api/api/users/me/password",e)).data,i=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.x.get("/api/api/users/me/boards",{params:e})).data},d=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.x.get("/api/api/users/me/reviews",{params:e})).data}},9375:function(e,s,r){"use strict";r.d(s,{t:function(){return n}});var t=r(9625),a=r(6885);let n=(0,t.Ue)()((0,a.tJ)(e=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,setAuth:(s,r,t)=>e({user:s,accessToken:r,refreshToken:t,isAuthenticated:!0}),clearAuth:()=>e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1}),updateUser:s=>e(e=>({user:e.user?{...e.user,...s}:null}))}),{name:"auth-storage"}))},7802:function(e,s,r){"use strict";r.d(s,{A:function(){return a},E:function(){return t}});let t=(0,r(9625).Ue)(e=>({toasts:[],addToast:s=>{let r="toast-".concat(Date.now(),"-").concat(Math.random()),t={id:r,duration:3e3,...s};e(e=>({toasts:[...e.toasts,t]})),t.duration&&setTimeout(()=>{e(e=>({toasts:e.toasts.filter(e=>e.id!==r)}))},t.duration)},removeToast:s=>e(e=>({toasts:e.toasts.filter(e=>e.id!==s)})),clearToasts:()=>e({toasts:[]})})),a={success:(e,s)=>t.getState().addToast({type:"success",message:e,duration:s}),error:(e,s)=>t.getState().addToast({type:"error",message:e,duration:s}),warning:(e,s)=>t.getState().addToast({type:"warning",message:e,duration:s}),info:(e,s)=>t.getState().addToast({type:"info",message:e,duration:s})}}},function(e){e.O(0,[3464,5883,2971,2117,1744],function(){return e(e.s=3894)}),_N_E=e.O()}]);