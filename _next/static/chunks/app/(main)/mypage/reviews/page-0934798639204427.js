(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5820],{2971:function(e,t,s){Promise.resolve().then(s.bind(s,6151))},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},6151:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var a=s(7437),r=s(2265),n=s(9376),i=s(7648),o=s(9032),c=s(9904),l=s(9064),d=s(9731);function u(){(0,n.useRouter)();let[e,t]=(0,r.useState)([]),[s,u]=(0,r.useState)(!0),[m,h]=(0,r.useState)("latest"),[p,g]=(0,r.useState)(1),[x,f]=(0,r.useState)(1);(0,r.useEffect)(()=>{v()},[p,m]);let v=async()=>{try{u(!0);let e=await (0,o.uN)({page:p,limit:10,sort:m});t(e.reviews),f(e.pagination.totalPages)}catch(e){console.error("Failed to load reviews:",e),l.Am.error("리뷰를 불러오는데 실패했습니다")}finally{u(!1)}},y=async e=>{if(confirm("이 리뷰를 삭제하시겠습니까?"))try{await (0,c.i0)(e),l.Am.success("리뷰가 삭제되었습니다"),v()}catch(e){console.error("Failed to delete review:",e),l.Am.error("리뷰 삭제에 실패했습니다")}},b=e=>(0,a.jsx)("div",{className:"flex gap-0.5",children:[1,2,3,4,5].map(t=>(0,a.jsx)("span",{className:"text-lg ".concat(t<=e?"text-yellow-400":"text-gray-300"),children:"★"},t))});return s?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-48 mb-4 animate-pulse"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-64 animate-pulse"})]}),[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-3 animate-pulse"}),(0,a.jsx)("div",{className:"h-5 bg-gray-200 rounded w-24 mb-3 animate-pulse"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-2 animate-pulse"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 animate-pulse"})]},t))]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"내가 쓴 리뷰"}),(0,a.jsxs)("p",{className:"mt-1 text-sm text-gray-600",children:["총 ",e.length,"개의 리뷰"]})]}),(0,a.jsx)(i.default,{href:"/places",className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"장소 둘러보기"})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("select",{value:m,onChange:e=>h(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,a.jsx)("option",{value:"latest",children:"최신순"}),(0,a.jsx)("option",{value:"popular",children:"인기순 (좋아요)"})]})})]}),0===e.length?(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"⭐"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"작성한 리뷰가 없습니다"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"방문한 장소에 대한 리뷰를 작성하고 다른 여행자들과 경험을 공유해보세요"}),(0,a.jsx)(i.default,{href:"/places",className:"inline-block px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"장소 둘러보기"})]}):(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>{var t;return(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-500 mb-1",children:["장소 ID: ",e.placeId]}),b(e.rating)]}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString("ko-KR")})]}),(0,a.jsx)("p",{className:"text-gray-700 mb-4 whitespace-pre-wrap",children:e.content}),e.images&&e.images.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2 mb-4",children:e.images.slice(0,3).map((e,t)=>(0,a.jsx)("img",{src:e,alt:"리뷰 이미지 ".concat(t+1),className:"w-full h-24 object-cover rounded"},t))}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[(0,a.jsx)("div",{className:"flex gap-4 text-sm text-gray-500",children:(0,a.jsxs)("span",{className:"flex items-center gap-1",children:["\uD83D\uDC4D ",(null===(t=e._count)||void 0===t?void 0:t.likes)||0]})}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)("button",{onClick:()=>y(e.id),className:"px-3 py-1.5 text-sm font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded transition-colors",children:"삭제"})})]})]})},e.id)})}),!s&&x>1&&(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(d.Z,{currentPage:p,totalPages:x,onPageChange:g})})]})}},9731:function(e,t,s){"use strict";var a=s(7437);t.Z=e=>{let{currentPage:t,totalPages:s,onPageChange:r}=e;return s<=1?null:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-8",children:[(0,a.jsx)("button",{onClick:()=>r(t-1),disabled:1===t,className:"px-4 py-2 rounded-lg border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:"이전"}),(()=>{let e=[];if(s<=5)for(let t=1;t<=s;t++)e.push(t);else{e.push(1),t>3&&e.push("...");for(let a=Math.max(2,t-1);a<=Math.min(s-1,t+1);a++)e.push(a);t<s-2&&e.push("..."),e.push(s)}return e})().map((e,s)=>{if("..."===e)return(0,a.jsx)("span",{className:"px-2 text-gray-500",children:"..."},"ellipsis-".concat(s));let n=e===t;return(0,a.jsx)("button",{onClick:()=>r(e),className:"px-4 py-2 rounded-lg border transition-colors ".concat(n?"bg-primary-500 text-white border-primary-500":"border-gray-300 hover:bg-gray-50"),children:e},e)}),(0,a.jsx)("button",{onClick:()=>r(t+1),disabled:t===s,className:"px-4 py-2 rounded-lg border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:"다음"})]})}},6305:function(e,t,s){"use strict";s.d(t,{x:function(){return o}});var a=s(3464),r=s(9375),n=s(7802);let i="http://localhost:4000",o=a.Z.create({baseURL:i,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{let{accessToken:t}=r.t.getState();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,async e=>{var t,s;let c=e.config;if(!e.response)return n.A.error("인터넷 연결을 확인해주세요"),Promise.reject(e);if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!c._retry){c._retry=!0;try{let{refreshToken:e}=r.t.getState();if(!e)throw Error("No refresh token");let{accessToken:t,refreshToken:s}=(await a.Z.post("".concat(i,"/api/auth/refresh"),{refreshToken:e})).data,{user:n}=r.t.getState();return n&&r.t.getState().setAuth(n,t,s),c.headers.Authorization="Bearer ".concat(t),o(c)}catch(e){return r.t.getState().clearAuth(),n.A.error("세션이 만료되었습니다. 다시 로그인해주세요"),window.location.href="/login",Promise.reject(e)}}403===e.response.status&&n.A.error("접근 권한이 없습니다"),404===e.response.status&&n.A.error("요청하신 정보를 찾을 수 없습니다"),e.response.status>=500&&n.A.error("일시적인 오류가 발생했습니다. 잠시 후 다시 시도해주세요");let l=null===(s=e.response.data)||void 0===s?void 0:s.message;if(l&&![401,403,404].includes(e.response.status)){let e=Array.isArray(l)?l[0]:l;n.A.error(e)}return Promise.reject(e)})},9904:function(e,t,s){"use strict";s.d(t,{Jh:function(){return r},XU:function(){return n},i0:function(){return i},yA:function(){return o}});var a=s(6305);let r=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return(await a.x.get("/api/reviews",{params:{placeId:e,page:t,limit:s}})).data},n=async e=>(await a.x.post("/api/reviews",e)).data,i=async e=>{await a.x.delete("/api/reviews/".concat(e))},o=async e=>(await a.x.post("/api/reviews/".concat(e,"/like"))).data},9032:function(e,t,s){"use strict";s.d(t,{C:function(){return o},Cp:function(){return i},US:function(){return r},ck:function(){return n},uN:function(){return c}});var a=s(6305);let r=async()=>(await a.x.get("/api/api/users/me/profile")).data,n=async e=>(await a.x.put("/api/api/users/me/profile",e)).data,i=async e=>(await a.x.put("/api/api/users/me/password",e)).data,o=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await a.x.get("/api/api/users/me/boards",{params:e})).data},c=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await a.x.get("/api/api/users/me/reviews",{params:e})).data}},9375:function(e,t,s){"use strict";s.d(t,{t:function(){return n}});var a=s(9625),r=s(6885);let n=(0,a.Ue)()((0,r.tJ)(e=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,setAuth:(t,s,a)=>e({user:t,accessToken:s,refreshToken:a,isAuthenticated:!0}),clearAuth:()=>e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1}),updateUser:t=>e(e=>({user:e.user?{...e.user,...t}:null}))}),{name:"auth-storage"}))},7802:function(e,t,s){"use strict";s.d(t,{A:function(){return r},E:function(){return a}});let a=(0,s(9625).Ue)(e=>({toasts:[],addToast:t=>{let s="toast-".concat(Date.now(),"-").concat(Math.random()),a={id:s,duration:3e3,...t};e(e=>({toasts:[...e.toasts,a]})),a.duration&&setTimeout(()=>{e(e=>({toasts:e.toasts.filter(e=>e.id!==s)}))},a.duration)},removeToast:t=>e(e=>({toasts:e.toasts.filter(e=>e.id!==t)})),clearToasts:()=>e({toasts:[]})})),r={success:(e,t)=>a.getState().addToast({type:"success",message:e,duration:t}),error:(e,t)=>a.getState().addToast({type:"error",message:e,duration:t}),warning:(e,t)=>a.getState().addToast({type:"warning",message:e,duration:t}),info:(e,t)=>a.getState().addToast({type:"info",message:e,duration:t})}}},function(e){e.O(0,[3464,5883,7648,9064,2971,2117,1744],function(){return e(e.s=2971)}),_N_E=e.O()}]);