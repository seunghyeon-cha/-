(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8580],{9463:function(e,t,s){Promise.resolve().then(s.bind(s,6483))},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},6483:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var a=s(7437),r=s(2265),n=s(9376),i=s(8837),c=s(9226);function l(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)().get("q")||"",[s,l]=(0,r.useState)(t),[o,d]=(0,r.useState)("all"),[u,m]=(0,r.useState)([]),[h,x]=(0,r.useState)([]),[p,g]=(0,r.useState)(!1),[f,y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&j()},[t]);let j=async t=>{if(t&&t.preventDefault(),s.trim())try{if(g(!0),y(!0),"all"===o||"places"===o){let e=await (0,i.fQ)({search:s,limit:20});m(e.data)}else m([]);if("all"===o||"boards"===o){let e=await (0,c.DC)({search:s,limit:20});x(e.data)}else x([]);e.push("/search?q=".concat(encodeURIComponent(s)))}catch(e){console.error("Search failed:",e),m([]),x([])}finally{g(!1)}},b=u.length+h.length;return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"검색"}),(0,a.jsx)("form",{onSubmit:j,className:"mb-6",children:(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("input",{type:"text",value:s,onChange:e=>l(e.target.value),placeholder:"장소, 게시글 검색...",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-lg"}),(0,a.jsx)("button",{type:"submit",className:"px-8 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors font-semibold",children:"검색"})]})}),(0,a.jsx)("div",{className:"flex gap-2",children:[{key:"all",label:"전체"},{key:"places",label:"장소"},{key:"boards",label:"게시글"}].map(e=>(0,a.jsx)("button",{onClick:()=>d(e.key),className:"px-4 py-2 rounded-lg font-semibold transition-colors ".concat(o===e.key?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.label},e.key))})]})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:p?(0,a.jsx)("div",{className:"space-y-4",children:Array.from({length:5}).map((e,t)=>(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm animate-pulse",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-3"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]},t))}):f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:s?(0,a.jsxs)(a.Fragment,{children:["'",(0,a.jsx)("span",{className:"text-primary-600",children:s}),"' 검색 결과"," ",(0,a.jsxs)("span",{className:"text-gray-600",children:["(",b,"개)"]})]}):"검색 결과"})}),0===b?(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"검색 결과가 없습니다"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"다른 키워드로 검색해보세요"})]}):(0,a.jsxs)("div",{className:"space-y-8",children:[u.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-md font-semibold text-gray-900 mb-4",children:["장소 (",u.length,")"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(t=>(0,a.jsxs)("div",{onClick:()=>e.push("/places/".concat(t.id)),className:"bg-white rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer",children:[t.images&&t.images.length>0&&(0,a.jsx)("img",{src:t.images[0],alt:t.name,className:"w-full h-40 object-cover rounded-lg mb-3"}),(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:t.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:t.address}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-100 rounded",children:t.category}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),(0,a.jsx)("span",{children:t.averageRating.toFixed(1)}),(0,a.jsxs)("span",{children:["(",t.reviewCount,")"]})]})]})]},t.id))})]}),h.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-md font-semibold text-gray-900 mb-4",children:["게시글 (",h.length,")"]}),(0,a.jsx)("div",{className:"space-y-3",children:h.map(t=>(0,a.jsx)("div",{onClick:()=>e.push("/boards/".concat(t.id)),className:"bg-white rounded-lg p-5 shadow-sm hover:shadow-md transition-shadow cursor-pointer",children:(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 bg-primary-50 text-primary-600 text-xs font-semibold rounded",children:t.category}),t.isPinned&&(0,a.jsx)("span",{className:"px-2 py-1 bg-yellow-50 text-yellow-600 text-xs font-semibold rounded",children:"공지"})]}),(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:t.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2 mb-2",children:t.content}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[(0,a.jsx)("span",{children:t.user.name}),(0,a.jsx)("span",{children:new Date(t.createdAt).toLocaleDateString()}),(0,a.jsxs)("span",{children:["조회 ",t.views]}),(0,a.jsxs)("span",{children:["좋아요 ",t.likesCount]})]})]}),t.images&&t.images.length>0&&(0,a.jsx)("img",{src:t.images[0],alt:t.title,className:"w-20 h-20 rounded-lg object-cover ml-4"})]})},t.id))})]})]})]}):(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)("svg",{className:"mx-auto h-16 w-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,a.jsx)("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"검색어를 입력하세요"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"원하시는 장소나 게시글을 찾아보세요"})]})})]})}},9226:function(e,t,s){"use strict";s.d(t,{DC:function(){return r},IK:function(){return d},L1:function(){return l},WU:function(){return n},aX:function(){return i},uW:function(){return o},wN:function(){return c}});var a=s(6305);let r=async e=>(await a.x.get("/api/boards",{params:e})).data,n=async e=>(await a.x.get("/api/boards/".concat(e))).data,i=async e=>(await a.x.post("/api/boards",e)).data,c=async(e,t)=>(await a.x.put("/api/boards/".concat(e),t)).data,l=async e=>(await a.x.delete("/api/boards/".concat(e))).data,o=async e=>(await a.x.post("/api/boards/".concat(e,"/like"))).data,d=async e=>(await a.x.get("/api/boards/".concat(e,"/like/check"))).data},6305:function(e,t,s){"use strict";s.d(t,{x:function(){return c}});var a=s(3464),r=s(9375),n=s(7802);let i="http://localhost:4000",c=a.Z.create({baseURL:i,headers:{"Content-Type":"application/json"}});c.interceptors.request.use(e=>{let{accessToken:t}=r.t.getState();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),c.interceptors.response.use(e=>e,async e=>{var t,s;let l=e.config;if(!e.response)return n.A.error("인터넷 연결을 확인해주세요"),Promise.reject(e);if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!l._retry){l._retry=!0;try{let{refreshToken:e}=r.t.getState();if(!e)throw Error("No refresh token");let{accessToken:t,refreshToken:s}=(await a.Z.post("".concat(i,"/api/auth/refresh"),{refreshToken:e})).data,{user:n}=r.t.getState();return n&&r.t.getState().setAuth(n,t,s),l.headers.Authorization="Bearer ".concat(t),c(l)}catch(e){return r.t.getState().clearAuth(),n.A.error("세션이 만료되었습니다. 다시 로그인해주세요"),window.location.href="/login",Promise.reject(e)}}403===e.response.status&&n.A.error("접근 권한이 없습니다"),404===e.response.status&&n.A.error("요청하신 정보를 찾을 수 없습니다"),e.response.status>=500&&n.A.error("일시적인 오류가 발생했습니다. 잠시 후 다시 시도해주세요");let o=null===(s=e.response.data)||void 0===s?void 0:s.message;if(o&&![401,403,404].includes(e.response.status)){let e=Array.isArray(o)?o[0]:o;n.A.error(e)}return Promise.reject(e)})},8837:function(e,t,s){"use strict";s.d(t,{Nc:function(){return i},_7:function(){return n},fQ:function(){return r}});var a=s(6305);let r=async e=>(await a.x.get("/api/places",{params:e})).data,n=async e=>(await a.x.get("/api/places/".concat(e))).data,i=async e=>(await a.x.post("/api/places",e)).data},9375:function(e,t,s){"use strict";s.d(t,{t:function(){return n}});var a=s(9625),r=s(6885);let n=(0,a.Ue)()((0,r.tJ)(e=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,setAuth:(t,s,a)=>e({user:t,accessToken:s,refreshToken:a,isAuthenticated:!0}),clearAuth:()=>e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1}),updateUser:t=>e(e=>({user:e.user?{...e.user,...t}:null}))}),{name:"auth-storage"}))},7802:function(e,t,s){"use strict";s.d(t,{A:function(){return r},E:function(){return a}});let a=(0,s(9625).Ue)(e=>({toasts:[],addToast:t=>{let s="toast-".concat(Date.now(),"-").concat(Math.random()),a={id:s,duration:3e3,...t};e(e=>({toasts:[...e.toasts,a]})),a.duration&&setTimeout(()=>{e(e=>({toasts:e.toasts.filter(e=>e.id!==s)}))},a.duration)},removeToast:t=>e(e=>({toasts:e.toasts.filter(e=>e.id!==t)})),clearToasts:()=>e({toasts:[]})})),r={success:(e,t)=>a.getState().addToast({type:"success",message:e,duration:t}),error:(e,t)=>a.getState().addToast({type:"error",message:e,duration:t}),warning:(e,t)=>a.getState().addToast({type:"warning",message:e,duration:t}),info:(e,t)=>a.getState().addToast({type:"info",message:e,duration:t})}}},function(e){e.O(0,[3464,5883,2971,2117,1744],function(){return e(e.s=9463)}),_N_E=e.O()}]);