(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2129],{4441:function(e,r,t){Promise.resolve().then(t.bind(t,1514))},1514:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return f}});var s=t(7437),a=t(2265),n=t(9376),i=t(7648),l=t(9501),o=t(3590),d=t(7119),c=t(4565),u=t(4804),m=t(1492),x=t(6898),h=t(9375),p=t(7802);let g=d.Ry({email:d.Z_().email("올바른 이메일 형식이 아닙니다"),password:d.Z_().min(8,"비밀번호는 8자 이상이어야 합니다").regex(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]/,"영문, 숫자, 특수문자를 포함해야 합니다"),passwordConfirm:d.Z_(),name:d.Z_().min(2,"이름은 2자 이상이어야 합니다"),phone:d.Z_().optional(),agreeTerms:d.O7().refine(e=>!0===e,{message:"이용약관에 동의해주세요"}),agreePrivacy:d.O7().refine(e=>!0===e,{message:"개인정보처리방침에 동의해주세요"}),agreeMarketing:d.O7().optional()}).refine(e=>e.password===e.passwordConfirm,{message:"비밀번호가 일치하지 않습니다",path:["passwordConfirm"]});function f(){var e,r,t,d,f;let y=(0,n.useRouter)(),{setAuth:b}=(0,h.t)(),[v,j]=(0,a.useState)(!1),[w,N]=(0,a.useState)(null),{register:k,handleSubmit:A,watch:T,formState:{errors:Z}}=(0,l.cI)({resolver:(0,o.F)(g)}),C=T("password"),W=T("passwordConfirm"),S=(e=>{if(!e)return null;if(e.length<8)return"weak";let r=/[A-Za-z]/.test(e),t=/\d/.test(e),s=/[@$!%*#?&]/.test(e);return r&&t&&s?"strong":r&&t||r&&s?"medium":"weak"})(C),_=async e=>{try{j(!0),N(null);let r=await (0,x.IU)({email:e.email,password:e.password,name:e.name,phone:e.phone});b(r.user,r.accessToken,r.refreshToken),p.A.success("회원가입이 완료되었습니다"),y.push("/")}catch(e){var r,t;N((null===(t=e.response)||void 0===t?void 0:null===(r=t.data)||void 0===r?void 0:r.message)||"회원가입에 실패했습니다. 다시 시도해주세요.")}finally{j(!1)}};return(0,s.jsxs)(m.Z,{padding:"lg",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-primary-500 rounded-full flex items-center justify-center text-white text-xl font-bold mx-auto mb-4",children:"예"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-primary-700 mb-2",children:"예림투어 회원가입"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"함께 만드는 여행 이야기"})]}),w&&(0,s.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-error rounded-lg text-sm text-error",children:w}),(0,s.jsxs)("form",{onSubmit:A(_),className:"space-y-5",children:[(0,s.jsx)(u.Z,{label:"이메일 *",type:"email",placeholder:"user@yerimtour.com",fullWidth:!0,error:null===(e=Z.email)||void 0===e?void 0:e.message,...k("email")}),(0,s.jsxs)("div",{children:[(0,s.jsx)(u.Z,{label:"비밀번호 *",type:"password",placeholder:"8자 이상, 영문+숫자+특수문자",fullWidth:!0,error:null===(r=Z.password)||void 0===r?void 0:r.message,...k("password")}),C&&S&&(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("div",{className:"h-1 flex-1 rounded ".concat("weak"===S?"bg-error":"bg-gray-200")}),(0,s.jsx)("div",{className:"h-1 flex-1 rounded ".concat("medium"===S||"strong"===S?"bg-yellow-500":"bg-gray-200")}),(0,s.jsx)("div",{className:"h-1 flex-1 rounded ".concat("strong"===S?"bg-success":"bg-gray-200")})]}),(0,s.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["weak"===S&&"약한 비밀번호","medium"===S&&"보통 비밀번호","strong"===S&&"강한 비밀번호"]})]})]}),(0,s.jsx)(u.Z,{label:"비밀번호 확인 *",type:"password",placeholder:"비밀번호를 다시 입력하세요",fullWidth:!0,error:null===(t=Z.passwordConfirm)||void 0===t?void 0:t.message,success:W&&C===W?"비밀번호가 일치합니다":void 0,...k("passwordConfirm")}),(0,s.jsx)(u.Z,{label:"이름 *",type:"text",placeholder:"홍길동",fullWidth:!0,error:null===(d=Z.name)||void 0===d?void 0:d.message,...k("name")}),(0,s.jsx)(u.Z,{label:"전화번호",type:"tel",placeholder:"010-1234-5678",fullWidth:!0,error:null===(f=Z.phone)||void 0===f?void 0:f.message,...k("phone")}),(0,s.jsxs)("div",{className:"space-y-3 pt-4",children:[(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("input",{type:"checkbox",id:"agreeTerms",className:"w-[18px] h-[18px] border border-gray-300 rounded text-primary-500 focus:ring-primary-500 mt-0.5",...k("agreeTerms")}),(0,s.jsxs)("label",{htmlFor:"agreeTerms",className:"ml-2 text-sm text-gray-700",children:[(0,s.jsx)("span",{className:"text-error",children:"*"})," [필수] 이용약관 동의"," ",(0,s.jsx)("a",{href:"#",className:"text-primary-600 text-xs underline",onClick:e=>{e.preventDefault(),p.A.info("이용약관 모달 (준비 중)")},children:"보기"})]})]}),Z.agreeTerms&&(0,s.jsx)("p",{className:"text-xs text-error ml-6",children:Z.agreeTerms.message}),(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("input",{type:"checkbox",id:"agreePrivacy",className:"w-[18px] h-[18px] border border-gray-300 rounded text-primary-500 focus:ring-primary-500 mt-0.5",...k("agreePrivacy")}),(0,s.jsxs)("label",{htmlFor:"agreePrivacy",className:"ml-2 text-sm text-gray-700",children:[(0,s.jsx)("span",{className:"text-error",children:"*"})," [필수] 개인정보처리방침 동의"," ",(0,s.jsx)("a",{href:"#",className:"text-primary-600 text-xs underline",onClick:e=>{e.preventDefault(),p.A.info("개인정보처리방침 모달 (준비 중)")},children:"보기"})]})]}),Z.agreePrivacy&&(0,s.jsx)("p",{className:"text-xs text-error ml-6",children:Z.agreePrivacy.message}),(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("input",{type:"checkbox",id:"agreeMarketing",className:"w-[18px] h-[18px] border border-gray-300 rounded text-primary-500 focus:ring-primary-500 mt-0.5",...k("agreeMarketing")}),(0,s.jsx)("label",{htmlFor:"agreeMarketing",className:"ml-2 text-sm text-gray-700",children:"[선택] 마케팅 정보 수신 동의"})]})]}),(0,s.jsx)(c.Z,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,isLoading:v,children:"회원가입"})]}),(0,s.jsxs)("div",{className:"flex items-center my-8",children:[(0,s.jsx)("div",{className:"flex-1 border-t border-gray-300"}),(0,s.jsx)("span",{className:"px-4 text-sm text-gray-500",children:"또는"}),(0,s.jsx)("div",{className:"flex-1 border-t border-gray-300"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(c.Z,{type:"button",fullWidth:!0,className:"bg-[#FEE500] text-black hover:bg-[#FDD800] h-11",onClick:()=>p.A.info("카카오 회원가입은 준비 중입니다"),children:(0,s.jsx)("span",{className:"font-semibold",children:"카카오로 계속하기"})}),(0,s.jsx)(c.Z,{type:"button",fullWidth:!0,className:"bg-[#03C75A] text-white hover:bg-[#02B350] h-11",onClick:()=>p.A.info("네이버 회원가입은 준비 중입니다"),children:(0,s.jsx)("span",{className:"font-semibold",children:"네이버로 계속하기"})}),(0,s.jsx)(c.Z,{type:"button",variant:"outline",fullWidth:!0,className:"border-gray-300 text-gray-700 h-11",onClick:()=>p.A.info("구글 회원가입은 준비 중입니다"),children:(0,s.jsx)("span",{className:"font-semibold",children:"구글로 계속하기"})})]}),(0,s.jsxs)("div",{className:"mt-8 text-center text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"이미 계정이 있으신가요? "}),(0,s.jsx)(i.default,{href:"/login",className:"text-primary-600 font-bold hover:text-primary-700",children:"로그인"})]})]})}},4565:function(e,r,t){"use strict";var s=t(7437),a=t(1994);r.Z=e=>{let{variant:r="primary",size:t="md",isLoading:n=!1,fullWidth:i=!1,className:l,disabled:o,children:d,...c}=e;return(0,s.jsx)("button",{className:(0,a.W)("inline-flex items-center justify-center font-semibold rounded-lg transition-all duration-200 disabled:cursor-not-allowed disabled:opacity-60",{primary:"bg-primary-500 text-white hover:bg-primary-600 active:bg-primary-700 disabled:bg-gray-400",secondary:"bg-gray-100 text-gray-700 hover:bg-gray-200 active:bg-gray-300 disabled:bg-gray-100",outline:"bg-transparent text-primary-500 border border-primary-500 hover:bg-primary-50 active:bg-primary-100 disabled:border-gray-300 disabled:text-gray-400",ghost:"bg-transparent text-gray-500 hover:bg-gray-100 active:bg-gray-200 disabled:bg-transparent disabled:text-gray-400"}[r],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 text-base",lg:"h-12 px-6 text-base"}[t],i?"w-full":"",n&&"cursor-wait",l),disabled:o||n,"aria-busy":n,...c,children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("span",{children:"로딩 중..."})]}):d})}},1492:function(e,r,t){"use strict";var s=t(7437),a=t(1994);r.Z=e=>{let{children:r,hover:t=!1,padding:n="md",shadow:i="md",className:l,...o}=e;return(0,s.jsx)("div",{className:(0,a.W)("bg-white rounded-lg transition-all duration-200",{none:"",sm:"p-4",md:"p-6",lg:"p-8"}[n],{none:"",sm:"shadow-sm",md:"shadow-md",lg:"shadow-lg"}[i],t?"hover:shadow-lg hover:-translate-y-1 cursor-pointer":"",l),...o,children:r})}},4804:function(e,r,t){"use strict";var s=t(7437),a=t(1994);r.Z=e=>{let{label:r,error:t,success:n,fullWidth:i=!1,className:l,disabled:o,type:d="text",...c}=e,u={default:"border-gray-300 bg-white focus:border-2 focus:border-primary-500",error:"border-error bg-red-50",success:"border-success bg-green-50",disabled:"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed"},m=i?"w-full":"";return(0,s.jsxs)("div",{className:(0,a.W)("flex flex-col gap-2",m),children:[r&&(0,s.jsx)("label",{className:"text-sm font-bold text-gray-700",children:r}),(0,s.jsx)("input",{type:d,className:(0,a.W)("h-11 px-4 rounded-lg text-base transition-all duration-200 border outline-none",o?u.disabled:t?u.error:n?u.success:u.default,m,l),disabled:o,...c}),t&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-error",children:[(0,s.jsx)("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,s.jsx)("span",{children:t})]}),n&&!t&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-success",children:[(0,s.jsx)("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,s.jsx)("span",{children:n})]})]})}},6898:function(e,r,t){"use strict";t.d(r,{IU:function(){return a},x4:function(){return n}});var s=t(6305);let a=async e=>(await s.x.post("/api/auth/signup",e)).data,n=async e=>(await s.x.post("/api/auth/login",e)).data},6305:function(e,r,t){"use strict";t.d(r,{x:function(){return l}});var s=t(3464),a=t(9375),n=t(7802);let i="http://localhost:4000",l=s.Z.create({baseURL:i,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let{accessToken:r}=a.t.getState();return r&&(e.headers.Authorization="Bearer ".concat(r)),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,async e=>{var r,t;let o=e.config;if(!e.response)return n.A.error("인터넷 연결을 확인해주세요"),Promise.reject(e);if((null===(r=e.response)||void 0===r?void 0:r.status)===401&&!o._retry){o._retry=!0;try{let{refreshToken:e}=a.t.getState();if(!e)throw Error("No refresh token");let{accessToken:r,refreshToken:t}=(await s.Z.post("".concat(i,"/api/auth/refresh"),{refreshToken:e})).data,{user:n}=a.t.getState();return n&&a.t.getState().setAuth(n,r,t),o.headers.Authorization="Bearer ".concat(r),l(o)}catch(e){return a.t.getState().clearAuth(),n.A.error("세션이 만료되었습니다. 다시 로그인해주세요"),window.location.href="/login",Promise.reject(e)}}403===e.response.status&&n.A.error("접근 권한이 없습니다"),404===e.response.status&&n.A.error("요청하신 정보를 찾을 수 없습니다"),e.response.status>=500&&n.A.error("일시적인 오류가 발생했습니다. 잠시 후 다시 시도해주세요");let d=null===(t=e.response.data)||void 0===t?void 0:t.message;if(d&&![401,403,404].includes(e.response.status)){let e=Array.isArray(d)?d[0]:d;n.A.error(e)}return Promise.reject(e)})},9375:function(e,r,t){"use strict";t.d(r,{t:function(){return n}});var s=t(9625),a=t(6885);let n=(0,s.Ue)()((0,a.tJ)(e=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,setAuth:(r,t,s)=>e({user:r,accessToken:t,refreshToken:s,isAuthenticated:!0}),clearAuth:()=>e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1}),updateUser:r=>e(e=>({user:e.user?{...e.user,...r}:null}))}),{name:"auth-storage"}))},7802:function(e,r,t){"use strict";t.d(r,{A:function(){return a},E:function(){return s}});let s=(0,t(9625).Ue)(e=>({toasts:[],addToast:r=>{let t="toast-".concat(Date.now(),"-").concat(Math.random()),s={id:t,duration:3e3,...r};e(e=>({toasts:[...e.toasts,s]})),s.duration&&setTimeout(()=>{e(e=>({toasts:e.toasts.filter(e=>e.id!==t)}))},s.duration)},removeToast:r=>e(e=>({toasts:e.toasts.filter(e=>e.id!==r)})),clearToasts:()=>e({toasts:[]})})),a={success:(e,r)=>s.getState().addToast({type:"success",message:e,duration:r}),error:(e,r)=>s.getState().addToast({type:"error",message:e,duration:r}),warning:(e,r)=>s.getState().addToast({type:"warning",message:e,duration:r}),info:(e,r)=>s.getState().addToast({type:"info",message:e,duration:r})}},1994:function(e,r,t){"use strict";function s(){for(var e,r,t=0,s="",a=arguments.length;t<a;t++)(e=arguments[t])&&(r=function e(r){var t,s,a="";if("string"==typeof r||"number"==typeof r)a+=r;else if("object"==typeof r){if(Array.isArray(r)){var n=r.length;for(t=0;t<n;t++)r[t]&&(s=e(r[t]))&&(a&&(a+=" "),a+=s)}else for(s in r)r[s]&&(a&&(a+=" "),a+=s)}return a}(e))&&(s&&(s+=" "),s+=r);return s}t.d(r,{W:function(){return s}})}},function(e){e.O(0,[3464,5883,7648,6245,2971,2117,1744],function(){return e(e.s=4441)}),_N_E=e.O()}]);