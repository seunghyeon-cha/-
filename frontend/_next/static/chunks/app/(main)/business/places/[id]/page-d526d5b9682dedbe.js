(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1936],{5697:function(e,s,t){Promise.resolve().then(t.bind(t,5656))},9376:function(e,s,t){"use strict";var a=t(5475);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},5656:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var a=t(7437),r=t(2265),n=t(7648),i=t(9376),l=t(5188),c=t(7802);function d(){let e=(0,i.useParams)(),s=(0,i.useRouter)(),t=e.id,[d,o]=(0,r.useState)(null),[u,m]=(0,r.useState)(!0);(0,r.useEffect)(()=>{t&&x()},[t]);let x=async()=>{try{m(!0);let e=await (0,l.j_)(t);o(e)}catch(e){console.error("Failed to load place stats:",e),c.A.error("업장 통계를 불러오는데 실패했습니다")}finally{m(!1)}},h=e=>(0,a.jsx)("div",{className:"flex gap-0.5",children:[1,2,3,4,5].map(s=>(0,a.jsx)("span",{className:"text-xl ".concat(s<=e?"text-yellow-400":"text-gray-300"),children:"★"},s))});if(u)return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-48 mb-4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-64"})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 animate-pulse",children:(0,a.jsx)("div",{className:"h-64 bg-gray-200 rounded"})})]});if(!d)return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"업장 통계를 불러올 수 없습니다"}),(0,a.jsx)("button",{onClick:()=>s.push("/business/places"),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"목록으로 돌아가기"})]});let g=d.ratingDistribution.reduce((e,s)=>e+s.count,0);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:d.placeName})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.default,{href:"/business/promotions?placeId=".concat(t),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"프로모션 관리"}),(0,a.jsx)("button",{onClick:()=>s.push("/business/places"),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"목록"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"평균 평점"}),(0,a.jsx)("div",{className:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})})]}),(0,a.jsxs)("div",{className:"flex items-end gap-2",children:[(0,a.jsx)("span",{className:"text-3xl font-bold text-gray-900",children:d.avgRating.toFixed(1)}),(0,a.jsx)("span",{className:"text-sm text-gray-500 mb-1",children:"/ 5.0"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"총 리뷰 수"}),(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})})]}),(0,a.jsxs)("div",{className:"flex items-end gap-2",children:[(0,a.jsx)("span",{className:"text-3xl font-bold text-gray-900",children:g}),(0,a.jsx)("span",{className:"text-sm text-gray-500 mb-1",children:"개"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"총 북마크 수"}),(0,a.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"})})})]}),(0,a.jsxs)("div",{className:"flex items-end gap-2",children:[(0,a.jsx)("span",{className:"text-3xl font-bold text-gray-900",children:d.totalBookmarks}),(0,a.jsx)("span",{className:"text-sm text-gray-500 mb-1",children:"개"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"평점 분포"}),(0,a.jsx)("div",{className:"space-y-4",children:[5,4,3,2,1].map(e=>{let s=d.ratingDistribution.find(s=>s.rating===e),t=s?s.count:0,r=g>0?t/g*100:0;return(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-24 flex items-center gap-1",children:h(e)}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:(0,a.jsx)("div",{className:"bg-yellow-400 h-full transition-all duration-500",style:{width:"".concat(r,"%")}})})}),(0,a.jsxs)("div",{className:"w-32 text-right",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[t,"개"]}),(0,a.jsxs)("span",{className:"text-sm text-gray-500 ml-2",children:["(",r.toFixed(0),"%)"]})]})]},e)})}),0===g&&(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"아직 등록된 리뷰가 없습니다"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"최근 리뷰"}),(0,a.jsx)(n.default,{href:"/places/".concat(t,"#reviews"),className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"전체 리뷰 보기 →"})]}),d.recentReviews&&d.recentReviews.length>0?(0,a.jsx)("div",{className:"space-y-4",children:d.recentReviews.slice(0,5).map(e=>{var s,t,r;return(0,a.jsxs)("div",{className:"pb-4 border-b border-gray-200 last:border-b-0 last:pb-0",children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:(null===(t=e.user)||void 0===t?void 0:null===(s=t.name)||void 0===s?void 0:s.charAt(0))||"?"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:(null===(r=e.user)||void 0===r?void 0:r.name)||"익명"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[h(e.rating),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.createdAt).toLocaleDateString("ko-KR")})]})]})]})}),(0,a.jsx)("p",{className:"text-sm text-gray-700 mt-2 line-clamp-2",children:e.content})]},e.id)})}):(0,a.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,a.jsx)("div",{className:"text-4xl mb-3",children:"\uD83D\uDCAC"}),(0,a.jsx)("p",{children:"아직 작성된 리뷰가 없습니다"})]})]})]})}},5188:function(e,s,t){"use strict";t.d(s,{$e:function(){return r},Ai:function(){return n},C3:function(){return i},Qx:function(){return c},V_:function(){return l},j_:function(){return d}});var a=t(6305);let r=async e=>(await a.x.post("/api/business/verify",e)).data,n=async()=>(await a.x.get("/api/business/verify/status")).data,i=async()=>(await a.x.get("/api/business/places")).data,l=async()=>(await a.x.get("/api/business/stats")).data,c=async()=>(await a.x.get("/api/business/stats/places")).data,d=async e=>(await a.x.get("/api/business/stats/places/".concat(e))).data},6305:function(e,s,t){"use strict";t.d(s,{x:function(){return l}});var a=t(3464),r=t(9375),n=t(7802);let i="http://localhost:4000",l=a.Z.create({baseURL:i,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let{accessToken:s}=r.t.getState();return s&&(e.headers.Authorization="Bearer ".concat(s)),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,async e=>{var s,t;let c=e.config;if(!e.response)return n.A.error("인터넷 연결을 확인해주세요"),Promise.reject(e);if((null===(s=e.response)||void 0===s?void 0:s.status)===401&&!c._retry){c._retry=!0;try{let{refreshToken:e}=r.t.getState();if(!e)throw Error("No refresh token");let{accessToken:s,refreshToken:t}=(await a.Z.post("".concat(i,"/api/auth/refresh"),{refreshToken:e})).data,{user:n}=r.t.getState();return n&&r.t.getState().setAuth(n,s,t),c.headers.Authorization="Bearer ".concat(s),l(c)}catch(e){return r.t.getState().clearAuth(),n.A.error("세션이 만료되었습니다. 다시 로그인해주세요"),window.location.href="/login",Promise.reject(e)}}403===e.response.status&&n.A.error("접근 권한이 없습니다"),404===e.response.status&&n.A.error("요청하신 정보를 찾을 수 없습니다"),e.response.status>=500&&n.A.error("일시적인 오류가 발생했습니다. 잠시 후 다시 시도해주세요");let d=null===(t=e.response.data)||void 0===t?void 0:t.message;if(d&&![401,403,404].includes(e.response.status)){let e=Array.isArray(d)?d[0]:d;n.A.error(e)}return Promise.reject(e)})},9375:function(e,s,t){"use strict";t.d(s,{t:function(){return n}});var a=t(9625),r=t(6885);let n=(0,a.Ue)()((0,r.tJ)(e=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,setAuth:(s,t,a)=>e({user:s,accessToken:t,refreshToken:a,isAuthenticated:!0}),clearAuth:()=>e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1}),updateUser:s=>e(e=>({user:e.user?{...e.user,...s}:null}))}),{name:"auth-storage"}))},7802:function(e,s,t){"use strict";t.d(s,{A:function(){return r},E:function(){return a}});let a=(0,t(9625).Ue)(e=>({toasts:[],addToast:s=>{let t="toast-".concat(Date.now(),"-").concat(Math.random()),a={id:t,duration:3e3,...s};e(e=>({toasts:[...e.toasts,a]})),a.duration&&setTimeout(()=>{e(e=>({toasts:e.toasts.filter(e=>e.id!==t)}))},a.duration)},removeToast:s=>e(e=>({toasts:e.toasts.filter(e=>e.id!==s)})),clearToasts:()=>e({toasts:[]})})),r={success:(e,s)=>a.getState().addToast({type:"success",message:e,duration:s}),error:(e,s)=>a.getState().addToast({type:"error",message:e,duration:s}),warning:(e,s)=>a.getState().addToast({type:"warning",message:e,duration:s}),info:(e,s)=>a.getState().addToast({type:"info",message:e,duration:s})}}},function(e){e.O(0,[3464,5883,7648,2971,2117,1744],function(){return e(e.s=5697)}),_N_E=e.O()}]);