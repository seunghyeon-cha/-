(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8382],{8280:function(e,t,s){Promise.resolve().then(s.bind(s,531))},531:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var a=s(7437),r=s(2265),n=s(9376),i=s(5744),l=s(7802),o=s(9375),d=s(795),c=s(3662),u=s(9892);function m(e){return e<1e3?"".concat(Math.round(e),"m"):"".concat((e/1e3).toFixed(1),"km")}function x(e){if(e<60)return"".concat(e,"분");let t=Math.floor(e/60),s=e%60;return s>0?"".concat(t,"시간 ").concat(s,"분"):"".concat(t,"시간")}function h(e){return e.filter(e=>{var t,s;return(null===(t=e.place)||void 0===t?void 0:t.latitude)!=null&&(null===(s=e.place)||void 0===s?void 0:s.longitude)!=null})}function p(e,t){var s,a,r,n;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"car";if(!(null===(s=e.place)||void 0===s?void 0:s.latitude)||!(null===(a=e.place)||void 0===a?void 0:a.longitude)||!(null===(r=t.place)||void 0===r?void 0:r.latitude)||!(null===(n=t.place)||void 0===n?void 0:n.longitude))return null;let l=function(e,t,s,a){let r=(s-e)*Math.PI/180,n=(a-t)*Math.PI/180,i=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(n/2)*Math.sin(n/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371e3}(e.place.latitude,e.place.longitude,t.place.latitude,t.place.longitude),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"car";return Math.ceil(e/({walk:67,car:500,transit:333})[t])}(l,i);return{distance:l,duration:o}}function g(e){var t,s,n,i,l;let{place:o,index:d,isEditable:h,onUpdate:g,onDelete:y,nextPlace:f,showRouteInfo:v}=e,{attributes:j,listeners:b,setNodeRef:w,transform:N,transition:k,isDragging:C}=(0,c.nB)({id:o.id,disabled:!h}),[L,M]=(0,r.useState)(!1),[A,D]=(0,r.useState)(!1),[S,T]=(0,r.useState)(o.memo||""),[B,E]=(0,r.useState)(o.visitTime||""),P={transform:u.ux.Transform.toString(N),transition:k,opacity:C?.5:1},I=f?p(o,f):null,R=(null===(t=o.place)||void 0===t?void 0:t.latitude)&&(null===(s=o.place)||void 0===s?void 0:s.longitude);return(0,a.jsxs)("div",{ref:w,style:P,children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow ".concat(C?"shadow-lg ring-2 ring-primary-500":""),children:(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex gap-4",children:[h&&(0,a.jsx)("div",{...j,...b,className:"flex-shrink-0 cursor-grab active:cursor-grabbing hover:bg-gray-100 rounded p-2 -ml-2 -mt-2",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})})}),(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary-100 text-primary-600 flex items-center justify-center font-semibold text-sm",children:d+1})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-1 truncate",children:(null===(n=o.place)||void 0===n?void 0:n.name)||"장소 정보 없음"}),(null===(i=o.place)||void 0===i?void 0:i.address)&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2 truncate",children:o.place.address}),(null===(l=o.place)||void 0===l?void 0:l.category)&&(0,a.jsx)("span",{className:"inline-block px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded mb-2",children:o.place.category}),!R&&(0,a.jsx)("div",{className:"text-xs text-yellow-600 bg-yellow-50 px-2 py-1 rounded inline-block mb-2",children:"⚠️ 좌표 정보 없음 (지도 표시 불가)"}),(0,a.jsx)("div",{className:"mt-2",children:L?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("textarea",{value:S,onChange:e=>T(e.target.value),placeholder:"메모를 입력하세요...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",rows:2}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>{null==g||g(o.id,{memo:S}),M(!1)},className:"px-3 py-1 bg-primary-500 text-white rounded text-xs hover:bg-primary-600",children:"저장"}),(0,a.jsx)("button",{onClick:()=>{T(o.memo||""),M(!1)},className:"px-3 py-1 bg-gray-200 text-gray-700 rounded text-xs hover:bg-gray-300",children:"취소"})]})]}):(0,a.jsxs)("div",{children:[o.memo&&(0,a.jsx)("p",{className:"text-sm text-gray-700 p-3 bg-yellow-50 rounded-lg",children:o.memo}),h&&(0,a.jsx)("button",{onClick:()=>M(!0),className:"text-xs text-primary-600 hover:text-primary-700 mt-1",children:o.memo?"메모 수정":"+ 메모 추가"})]})})]}),(0,a.jsx)("div",{className:"flex-shrink-0",children:A?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"time",value:B,onChange:e=>E(e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-primary-500"}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("button",{onClick:()=>{null==g||g(o.id,{visitTime:B}),D(!1)},className:"px-2 py-1 bg-primary-500 text-white rounded text-xs hover:bg-primary-600",children:"저장"}),(0,a.jsx)("button",{onClick:()=>{E(o.visitTime||""),D(!1)},className:"px-2 py-1 bg-gray-200 text-gray-700 rounded text-xs hover:bg-gray-300",children:"취소"})]})]}):(0,a.jsxs)("div",{children:[o.visitTime&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),o.visitTime]}),h&&(0,a.jsx)("button",{onClick:()=>D(!0),className:"text-xs text-primary-600 hover:text-primary-700 mt-1",children:o.visitTime?"시간 수정":"+ 시간 설정"})]})}),h&&y&&(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("button",{onClick:()=>{confirm("이 장소를 삭제하시겠습니까?")&&y(o.id)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]})})}),v&&I&&f&&(0,a.jsx)("div",{className:"flex items-center justify-center py-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 px-4 py-2 bg-gray-50 rounded-lg text-sm",children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),(0,a.jsxs)("span",{className:"text-gray-700",children:[m(I.distance)," • ",x(I.duration)]})]})})]})}function y(e){let{places:t,onReorder:s,onUpdate:r,onDelete:n,isEditable:i=!0,showRouteInfo:l=!0}=e,o=(0,d.Dy)((0,d.VT)(d.we),(0,d.VT)(d.Lg,{coordinateGetter:c.is}));return 0===t.length?(0,a.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"장소가 없습니다"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"장소를 추가하여 일정을 만들어보세요"})]}):(0,a.jsx)(d.LB,{sensors:o,collisionDetection:d.pE,onDragEnd:e=>{let{active:a,over:r}=e;if(r&&a.id!==r.id){let e=t.findIndex(e=>e.id===a.id),n=t.findIndex(e=>e.id===r.id);s((0,c.Rp)(t,e,n).map((e,t)=>({...e,orderIndex:t})))}},children:(0,a.jsx)(c.Fo,{items:t,strategy:c.qw,children:(0,a.jsx)("div",{className:"space-y-3",children:t.map((e,s)=>(0,a.jsx)(g,{place:e,index:s,isEditable:i,onUpdate:r,onDelete:n,nextPlace:t[s+1],showRouteInfo:l},e.id))})})})}function f(e){let{places:t,selectedPlaceId:s,onPlaceClick:n,height:i="500px",showRoute:l=!0}=e,o=(0,r.useRef)(null),d=(0,r.useRef)(null),c=(0,r.useRef)([]),u=(0,r.useRef)(null),[m,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=()=>{window.kakao&&window.kakao.maps?window.kakao.maps.load(()=>{x(!0)}):setTimeout(e,100)};e()},[]),(0,r.useEffect)(()=>{if(!m||!o.current)return;let e=h(t);if(0===e.length)return;let s=e[0].place,a=new window.kakao.maps.LatLng(s.latitude,s.longitude),r=new window.kakao.maps.Map(o.current,{center:a,level:7});d.current=r;let n=new window.kakao.maps.ZoomControl;return r.addControl(n,window.kakao.maps.ControlPosition.RIGHT),()=>{d.current&&(d.current=null)}},[m,o]),(0,r.useEffect)(()=>{if(!d.current)return;let e=d.current,a=h(t);if(c.current.forEach(e=>e.setMap(null)),c.current=[],u.current&&(u.current.setMap(null),u.current=null),0===a.length)return;let r=new window.kakao.maps.LatLngBounds,i=[];if(a.forEach((t,a)=>{let l=new window.kakao.maps.LatLng(t.place.latitude,t.place.longitude);i.push(l),r.extend(l);let o='\n        <div style="position: relative; cursor: pointer;">\n          <div style="\n            width: 36px;\n            height: 36px;\n            background: '.concat(s===t.id?"#E53E3E":"#3B82F6",";\n            color: white;\n            border-radius: 50%;\n            border: 3px solid white;\n            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-weight: bold;\n            font-size: 14px;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n          \">\n            ").concat(a+1,"\n          </div>\n        </div>\n      "),d=new window.kakao.maps.CustomOverlay({position:l,content:o,yAnchor:.5});d.setMap(e),c.current.push(d);let u=new window.kakao.maps.InfoWindow({content:'\n          <div style="padding: 10px; min-width: 150px;">\n            <div style="font-weight: bold; margin-bottom: 5px;">\n              '.concat(t.place.name,"\n            </div>\n            ").concat(t.visitTime?'<div style="font-size: 12px; color: #666;">⏰ '.concat(t.visitTime,"</div>"):"","\n            ").concat(t.memo?'<div style="font-size: 12px; color: #666; margin-top: 5px;">\uD83D\uDCDD '.concat(t.memo,"</div>"):"","\n          </div>\n        "),removable:!0});window.kakao.maps.event.addListener(d.a,"click",function(){u.open(e,l),n&&n(t.id)})}),l&&i.length>1){let t=new window.kakao.maps.Polyline({path:i,strokeWeight:5,strokeColor:"#3B82F6",strokeOpacity:.7,strokeStyle:"solid"});t.setMap(e),u.current=t}1===a.length?(e.setCenter(i[0]),e.setLevel(3)):e.setBounds(r)},[t,s,l,n]);let p=h(t);return m?0===p.length?(0,a.jsx)("div",{style:{height:i},className:"bg-gray-100 rounded-lg flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center p-6",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"좌표 정보가 있는 장소가 없습니다"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"장소에 위도/경도 정보가 필요합니다"})]})}):(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{ref:o,style:{height:i},className:"rounded-lg overflow-hidden shadow-md"}),(0,a.jsxs)("div",{className:"absolute bottom-4 left-4 bg-white rounded-lg shadow-md p-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-primary-500 rounded-full border-2 border-white shadow-sm flex items-center justify-center text-white text-xs font-bold",children:"1"}),(0,a.jsx)("span",{className:"text-gray-700",children:"장소 순서"})]}),l&&p.length>1&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6 h-1 bg-primary-500 rounded"}),(0,a.jsx)("span",{className:"text-gray-700",children:"이동 경로"})]}),(0,a.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-200 text-xs text-gray-500",children:["총 ",p.length,"곳"]})]})]}):(0,a.jsx)("div",{style:{height:i},className:"bg-gray-100 rounded-lg flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"지도 로딩 중..."})]})})}function v(e){var t;let{params:s}=e,d=(0,n.useRouter)(),{user:c}=(0,o.t)(),[u,g]=(0,r.useState)(null),[v,j]=(0,r.useState)(!0),[b,w]=(0,r.useState)(!1),[N,k]=(0,r.useState)(1),[C,L]=(0,r.useState)(""),[M,A]=(0,r.useState)(""),[D,S]=(0,r.useState)(""),[T,B]=(0,r.useState)(""),[E,P]=(0,r.useState)(!1);(0,r.useEffect)(()=>{I()},[s.id]);let I=async()=>{try{j(!0);let e=await (0,i.fm)(s.id);g(e),L(e.title),A(e.region),S(e.startDate),B(e.endDate),P(e.isPublic)}catch(e){console.error("Failed to fetch itinerary:",e),l.A.error("일정을 불러오는데 실패했습니다"),d.push("/itinerary")}finally{j(!1)}};if(!v&&u&&(null==c?void 0:c.id)!==u.userId)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md max-w-md text-center",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-red-500 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"수정 권한이 없습니다"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"자신의 일정만 수정할 수 있습니다."}),(0,a.jsx)("button",{onClick:()=>d.push("/itinerary/".concat(s.id)),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"돌아가기"})]})});let R=()=>{if(D&&T){let e=new Date(D);return Math.ceil(Math.abs(new Date(T).getTime()-e.getTime())/864e5)+1}return 0},z=Array.from({length:R()},(e,t)=>{let s=new Date(D);return s.setDate(s.getDate()+t),{dayNumber:t+1,date:s.toISOString().split("T")[0],displayDate:s.toLocaleDateString("ko-KR",{month:"short",day:"numeric",weekday:"short"})}}),W=null==u?void 0:null===(t=u.days)||void 0===t?void 0:t.find(e=>e.dayNumber===N),F=(null==W?void 0:W.places)||[],_=async e=>{var t;if(!u)return;let a=(null===(t=u.days)||void 0===t?void 0:t.map(t=>t.dayNumber===N?{...t,places:e}:t))||[];g({...u,days:a});try{await (0,i.mB)(s.id,{}),l.A.success("장소 순서가 변경되었습니다")}catch(e){g(u),l.A.error("순서 변경에 실패했습니다")}},U=async(e,t)=>{var s;if(!u)return;let a=(null===(s=u.days)||void 0===s?void 0:s.map(s=>({...s,places:s.places.map(s=>s.id===e?{...s,...t}:s)})))||[];g({...u,days:a}),l.A.success("장소 정보가 수정되었습니다")},V=async e=>{var t;if(!u)return;let s=(null===(t=u.days)||void 0===t?void 0:t.map(t=>({...t,places:t.places.filter(t=>t.id!==e)})))||[];g({...u,days:s}),l.A.success("장소가 삭제되었습니다")},O=async()=>{if(!C.trim()){l.A.warning("제목을 입력해주세요");return}if(!D||!T){l.A.warning("시작 날짜와 종료 날짜를 선택해주세요");return}if(new Date(D)>new Date(T)){l.A.warning("종료 날짜는 시작 날짜보다 이후여야 합니다");return}try{w(!0),await (0,i.mB)(s.id,{title:C,region:M,startDate:D,endDate:T,isPublic:E}),l.A.success("일정이 저장되었습니다"),d.push("/itinerary/".concat(s.id))}catch(s){var e,t;console.error("Failed to update itinerary:",s),l.A.error((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"일정 수정에 실패했습니다")}finally{w(!1)}},q=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"car",s=h(e);if(s.length<2)return{totalDistance:0,totalDuration:0,segments:[],placeCount:s.length};let a=[],r=0,n=0;for(let e=0;e<s.length-1;e++){let i=p(s[e],s[e+1],t);i&&(a.push({from:e,to:e+1,fromPlace:s[e].place.name,toPlace:s[e+1].place.name,distance:i.distance,duration:i.duration}),r+=i.distance,n+=i.duration)}return{totalDistance:r,totalDuration:n,segments:a,placeCount:s.length}}(F);return v?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"일정을 불러오는 중..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"여행 일정 수정"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"드래그 앤 드롭으로 장소 순서를 변경하세요"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>d.push("/itinerary/".concat(s.id)),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"취소"}),(0,a.jsx)("button",{onClick:O,disabled:b,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:b?"저장 중...":"저장"})]})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"기본 정보"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["제목 ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",value:C,onChange:e=>L(e.target.value),placeholder:"예: 2025 제주도 가족 여행",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["지역 ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",value:M,onChange:e=>A(e.target.value),placeholder:"예: 제주도",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["시작 날짜 ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"date",value:D,onChange:e=>S(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["종료 날짜 ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"date",value:T,onChange:e=>B(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center gap-3",children:[(0,a.jsx)("input",{type:"checkbox",id:"isPublic",checked:E,onChange:e=>P(e.target.checked),className:"w-5 h-5 text-primary-600 border-gray-300 rounded focus:ring-2 focus:ring-primary-500"}),(0,a.jsx)("label",{htmlFor:"isPublic",className:"text-sm text-gray-700",children:"이 일정을 다른 사람들에게 공개합니다"})]})]}),R()>0&&(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:(0,a.jsx)("div",{className:"flex gap-2 overflow-x-auto",children:z.map(e=>(0,a.jsxs)("button",{onClick:()=>k(e.dayNumber),className:"px-4 py-2 rounded-lg whitespace-nowrap transition-colors ".concat(N===e.dayNumber?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,a.jsxs)("div",{className:"font-semibold",children:["Day ",e.dayNumber]}),(0,a.jsx)("div",{className:"text-xs mt-1",children:e.displayDate})]},e.dayNumber))})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Day ",N," 장소 목록"]}),(0,a.jsx)("button",{onClick:()=>l.A.info("장소 추가 기능은 곧 추가됩니다"),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 text-sm",children:"+ 장소 추가"})]}),(0,a.jsx)(y,{places:F,onReorder:_,onUpdate:U,onDelete:V,isEditable:!0,showRouteInfo:!0})]})}),(0,a.jsxs)("div",{className:"lg:col-span-1",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-4 lg:sticky lg:top-24",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"경로 지도"}),(0,a.jsx)(f,{places:F,height:"350px",showRoute:!0})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"일정 요약"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"장소 수"}),(0,a.jsxs)("span",{className:"font-semibold text-gray-900",children:[q.placeCount,"곳"]})]}),q.totalDistance>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"총 이동 거리"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:m(q.totalDistance)})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"예상 이동 시간"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:x(q.totalDuration)})]}),(0,a.jsx)("div",{className:"pt-3 border-t border-gray-200",children:(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"* 이동 시간은 직선 거리 기준 예상값입니다"})})]})]})]})]})]})]})]})}},6305:function(e,t,s){"use strict";s.d(t,{x:function(){return l}});var a=s(3464),r=s(9375),n=s(7802);let i="http://localhost:4000",l=a.Z.create({baseURL:i,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let{accessToken:t}=r.t.getState();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,async e=>{var t,s;let o=e.config;if(!e.response)return n.A.error("인터넷 연결을 확인해주세요"),Promise.reject(e);if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!o._retry){o._retry=!0;try{let{refreshToken:e}=r.t.getState();if(!e)throw Error("No refresh token");let{accessToken:t,refreshToken:s}=(await a.Z.post("".concat(i,"/api/auth/refresh"),{refreshToken:e})).data,{user:n}=r.t.getState();return n&&r.t.getState().setAuth(n,t,s),o.headers.Authorization="Bearer ".concat(t),l(o)}catch(e){return r.t.getState().clearAuth(),n.A.error("세션이 만료되었습니다. 다시 로그인해주세요"),window.location.href="/login",Promise.reject(e)}}403===e.response.status&&n.A.error("접근 권한이 없습니다"),404===e.response.status&&n.A.error("요청하신 정보를 찾을 수 없습니다"),e.response.status>=500&&n.A.error("일시적인 오류가 발생했습니다. 잠시 후 다시 시도해주세요");let d=null===(s=e.response.data)||void 0===s?void 0:s.message;if(d&&![401,403,404].includes(e.response.status)){let e=Array.isArray(d)?d[0]:d;n.A.error(e)}return Promise.reject(e)})},5744:function(e,t,s){"use strict";s.d(t,{fm:function(){return n},fw:function(){return i},hK:function(){return o},mB:function(){return l},y:function(){return r}});var a=s(6305);let r=async e=>(await a.x.get("/api/itinerary",{params:e})).data,n=async e=>(await a.x.get("/api/itinerary/".concat(e))).data,i=async e=>(await a.x.post("/api/itinerary",e)).data,l=async(e,t)=>(await a.x.put("/api/itinerary/".concat(e),t)).data,o=async e=>(await a.x.delete("/api/itinerary/".concat(e))).data},9375:function(e,t,s){"use strict";s.d(t,{t:function(){return n}});var a=s(9625),r=s(6885);let n=(0,a.Ue)()((0,r.tJ)(e=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,setAuth:(t,s,a)=>e({user:t,accessToken:s,refreshToken:a,isAuthenticated:!0}),clearAuth:()=>e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1}),updateUser:t=>e(e=>({user:e.user?{...e.user,...t}:null}))}),{name:"auth-storage"}))},7802:function(e,t,s){"use strict";s.d(t,{A:function(){return r},E:function(){return a}});let a=(0,s(9625).Ue)(e=>({toasts:[],addToast:t=>{let s="toast-".concat(Date.now(),"-").concat(Math.random()),a={id:s,duration:3e3,...t};e(e=>({toasts:[...e.toasts,a]})),a.duration&&setTimeout(()=>{e(e=>({toasts:e.toasts.filter(e=>e.id!==s)}))},a.duration)},removeToast:t=>e(e=>({toasts:e.toasts.filter(e=>e.id!==t)})),clearToasts:()=>e({toasts:[]})})),r={success:(e,t)=>a.getState().addToast({type:"success",message:e,duration:t}),error:(e,t)=>a.getState().addToast({type:"error",message:e,duration:t}),warning:(e,t)=>a.getState().addToast({type:"warning",message:e,duration:t}),info:(e,t)=>a.getState().addToast({type:"info",message:e,duration:t})}}},function(e){e.O(0,[3464,5883,9652,2971,2117,1744],function(){return e(e.s=8280)}),_N_E=e.O()}]);