(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4056],{1943:function(e,t,r){Promise.resolve().then(r.bind(r,3024))},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},3024:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var s=r(7437),a=r(2265),n=r(9376),i=r(5744),o=r(7802),l=r(9375);function c(e){var t,r;let{params:c}=e,d=(0,n.useRouter)(),{user:u}=(0,l.t)(),[m,h]=(0,a.useState)(null),[x,p]=(0,a.useState)(!0),[g,y]=(0,a.useState)(1),[f,v]=(0,a.useState)(!1);(0,a.useEffect)(()=>{j()},[c.id]);let j=async()=>{try{p(!0);let e=await (0,i.fm)(c.id);h(e)}catch(e){console.error("Failed to fetch itinerary:",e),o.A.error("일정을 불러오는데 실패했습니다"),h({id:c.id,title:"샘플 여행 일정",startDate:"2025-12-01",endDate:"2025-12-03",region:"제주도",userId:"user-123",user:{id:"user-123",name:"홍길동",email:"hong@example.com"},days:[],isPublic:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}finally{p(!1)}},b=()=>{d.push("/itinerary/".concat(c.id,"/edit"))},N=async()=>{if(confirm("정말 이 일정을 삭제하시겠습니까?"))try{v(!0),await (0,i.hK)(c.id),o.A.success("일정이 삭제되었습니다"),d.push("/itinerary")}catch(e){console.error("Failed to delete itinerary:",e),o.A.error("일정 삭제에 실패했습니다")}finally{v(!1)}};if(x)return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsx)("div",{className:"max-w-6xl mx-auto px-6 py-8",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm animate-pulse",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-4"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-6"}),(0,s.jsx)("div",{className:"h-40 bg-gray-200 rounded"})]})})});if(!m)return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"일정을 찾을 수 없습니다"}),(0,s.jsx)("button",{onClick:()=>d.push("/itinerary"),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"목록으로 돌아가기"})]})});let w=(null==u?void 0:u.id)===m.userId,k=new Date(m.startDate),A=new Date(m.endDate),S=Math.ceil(Math.abs(A.getTime()-k.getTime())/864e5)+1,L=Array.from({length:S},(e,t)=>{let r=new Date(k);return r.setDate(r.getDate()+t),{dayNumber:t+1,date:r.toISOString().split("T")[0],displayDate:r.toLocaleDateString("ko-KR",{month:"short",day:"numeric",weekday:"short"})}}),T=null===(t=m.days)||void 0===t?void 0:t.find(e=>e.dayNumber===g);return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:m.title}),m.isPublic&&(0,s.jsx)("span",{className:"px-2 py-1 bg-green-50 text-green-600 text-xs font-semibold rounded",children:"공개"})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[null===(r=m.user)||void 0===r?void 0:r.name," • "," ",new Date(m.createdAt).toLocaleDateString("ko-KR")]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>{let e=window.location.href;navigator.clipboard.writeText(e),o.A.success("링크가 클립보드에 복사되었습니다")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"공유"}),w&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:b,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"수정"}),(0,s.jsx)("button",{onClick:N,disabled:f,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:f?"삭제 중...":"삭제"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,s.jsx)("span",{className:"font-semibold",children:m.region})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,s.jsxs)("span",{children:[k.toLocaleDateString("ko-KR",{month:"short",day:"numeric"})," ","-"," ",A.toLocaleDateString("ko-KR",{month:"short",day:"numeric"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsxs)("span",{children:[S,"일"]})]})]})]})}),(0,s.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,s.jsx)("div",{className:"max-w-6xl mx-auto px-6",children:(0,s.jsx)("div",{className:"flex gap-2 overflow-x-auto py-4",children:L.map(e=>(0,s.jsxs)("button",{onClick:()=>y(e.dayNumber),className:"px-4 py-2 rounded-lg whitespace-nowrap transition-colors ".concat(g===e.dayNumber?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,s.jsxs)("div",{className:"font-semibold",children:["Day ",e.dayNumber]}),(0,s.jsx)("div",{className:"text-xs mt-1",children:e.displayDate})]},e.dayNumber))})})}),(0,s.jsx)("div",{className:"max-w-6xl mx-auto px-6 py-8",children:(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm",children:T&&T.places.length>0?(0,s.jsx)("div",{className:"divide-y divide-gray-200",children:T.places.sort((e,t)=>e.orderIndex-t.orderIndex).map((e,t)=>{var r,a,n;return(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary-100 text-primary-600 flex items-center justify-center font-semibold",children:t+1})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:(null===(r=e.place)||void 0===r?void 0:r.name)||"장소 정보 없음"}),(null===(a=e.place)||void 0===a?void 0:a.address)&&(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.place.address}),(null===(n=e.place)||void 0===n?void 0:n.category)&&(0,s.jsx)("span",{className:"inline-block px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded mb-2",children:e.place.category}),e.memo&&(0,s.jsx)("p",{className:"text-sm text-gray-700 mt-2 p-3 bg-yellow-50 rounded-lg",children:e.memo})]}),e.visitTime&&(0,s.jsxs)("div",{className:"flex-shrink-0 text-sm text-gray-600",children:[(0,s.jsx)("svg",{className:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.visitTime]})]})},e.id)})}):(0,s.jsxs)("div",{className:"p-16 text-center",children:[(0,s.jsxs)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,s.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"이 날짜에 계획된 장소가 없습니다"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:w?"수정 버튼을 눌러 장소를 추가해보세요":"아직 계획이 추가되지 않았습니다"}),w&&(0,s.jsx)("button",{onClick:b,className:"mt-4 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"장소 추가하기"})]})})})]})}},6305:function(e,t,r){"use strict";r.d(t,{x:function(){return o}});var s=r(3464),a=r(9375),n=r(7802);let i="http://localhost:4000",o=s.Z.create({baseURL:i,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{let{accessToken:t}=a.t.getState();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,async e=>{var t,r;let l=e.config;if(!e.response)return n.A.error("인터넷 연결을 확인해주세요"),Promise.reject(e);if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!l._retry){l._retry=!0;try{let{refreshToken:e}=a.t.getState();if(!e)throw Error("No refresh token");let{accessToken:t,refreshToken:r}=(await s.Z.post("".concat(i,"/api/auth/refresh"),{refreshToken:e})).data,{user:n}=a.t.getState();return n&&a.t.getState().setAuth(n,t,r),l.headers.Authorization="Bearer ".concat(t),o(l)}catch(e){return a.t.getState().clearAuth(),n.A.error("세션이 만료되었습니다. 다시 로그인해주세요"),window.location.href="/login",Promise.reject(e)}}403===e.response.status&&n.A.error("접근 권한이 없습니다"),404===e.response.status&&n.A.error("요청하신 정보를 찾을 수 없습니다"),e.response.status>=500&&n.A.error("일시적인 오류가 발생했습니다. 잠시 후 다시 시도해주세요");let c=null===(r=e.response.data)||void 0===r?void 0:r.message;if(c&&![401,403,404].includes(e.response.status)){let e=Array.isArray(c)?c[0]:c;n.A.error(e)}return Promise.reject(e)})},5744:function(e,t,r){"use strict";r.d(t,{fm:function(){return n},fw:function(){return i},hK:function(){return l},mB:function(){return o},y:function(){return a}});var s=r(6305);let a=async e=>(await s.x.get("/api/itinerary",{params:e})).data,n=async e=>(await s.x.get("/api/itinerary/".concat(e))).data,i=async e=>(await s.x.post("/api/itinerary",e)).data,o=async(e,t)=>(await s.x.put("/api/itinerary/".concat(e),t)).data,l=async e=>(await s.x.delete("/api/itinerary/".concat(e))).data},9375:function(e,t,r){"use strict";r.d(t,{t:function(){return n}});var s=r(9625),a=r(6885);let n=(0,s.Ue)()((0,a.tJ)(e=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,setAuth:(t,r,s)=>e({user:t,accessToken:r,refreshToken:s,isAuthenticated:!0}),clearAuth:()=>e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1}),updateUser:t=>e(e=>({user:e.user?{...e.user,...t}:null}))}),{name:"auth-storage"}))},7802:function(e,t,r){"use strict";r.d(t,{A:function(){return a},E:function(){return s}});let s=(0,r(9625).Ue)(e=>({toasts:[],addToast:t=>{let r="toast-".concat(Date.now(),"-").concat(Math.random()),s={id:r,duration:3e3,...t};e(e=>({toasts:[...e.toasts,s]})),s.duration&&setTimeout(()=>{e(e=>({toasts:e.toasts.filter(e=>e.id!==r)}))},s.duration)},removeToast:t=>e(e=>({toasts:e.toasts.filter(e=>e.id!==t)})),clearToasts:()=>e({toasts:[]})})),a={success:(e,t)=>s.getState().addToast({type:"success",message:e,duration:t}),error:(e,t)=>s.getState().addToast({type:"error",message:e,duration:t}),warning:(e,t)=>s.getState().addToast({type:"warning",message:e,duration:t}),info:(e,t)=>s.getState().addToast({type:"info",message:e,duration:t})}}},function(e){e.O(0,[3464,5883,2971,2117,1744],function(){return e(e.s=1943)}),_N_E=e.O()}]);